
<!DOCTYPE html>







<html data-bs-theme="auto" lang="en">
    <head>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>
            
                draft-ietf-spring-sr-service-programming-09
            
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://static.ietf.org/fonts/inter/import.css" rel="stylesheet">
        <link href="https://static.ietf.org/fonts/noto-sans-mono/import.css" rel="stylesheet">
        
            <link rel="stylesheet" href="https://static.ietf.org/dt/12.35.0/ietf/css/document_html_referenced.css">
            
                <link rel="stylesheet" href="https://static.ietf.org/dt/12.35.0/ietf/css/document_html_txt.css">
            
            <script type="module" crossorigin="" src="https://static.ietf.org/dt/12.35.0/assets/embedded-86412faf.js"></script>
<link href="https://static.ietf.org/dt/12.35.0/assets/create-pinia-singleton-2adb64ba.js" type="text/javascript" crossorigin="anonymous" rel="modulepreload" as="script" />
<link href="https://static.ietf.org/dt/12.35.0/assets/Scrollbar-1895147a.js" type="text/javascript" crossorigin="anonymous" rel="modulepreload" as="script" />
            <script src="https://static.ietf.org/dt/12.35.0/ietf/js/document_html.js"></script>
            <script src="https://static.ietf.org/dt/12.35.0/ietf/js/theme.js"></script>
        
        <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-spring-sr-service-programming/">
        <meta name="description"
            
                content="Service Programming with Segment Routing (Internet-Draft, 2024)"
            >
        

<link rel="apple-touch-icon"
      sizes="180x180"
      href="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor-180.png">
<link rel="icon"
      sizes="32x32"
      href="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor-32.png">
<link rel="icon"
      sizes="16x16"
      href="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor-16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon"
      href="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor-mask.svg"
      color="#ffffff">
<meta name="msapplication-TileColor"
      content="#ffffff">
<meta name="theme-color"
      content="#ffffff">
        




<meta property="og:title" content="Service Programming with Segment Routing">
<meta property="og:url" content="https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-service-programming-09">
<link rel="canonical" href="https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-service-programming-09">
<meta property="og:site_name" content="IETF Datatracker">
<meta property="og:description" content="This document defines data plane functionality required to implement service segments and achieve service programming in SR-enabled MPLS and IPv6 networks, as described in the Segment Routing architecture.">
<meta property="og:type" content="article">

<meta property="og:image" content="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-card.png">
<meta property="og:image:alt" content="Logo of the IETF">
<meta property="article:section" content="IETF - Internet Engineering Task Force">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">

<meta property="article:author" content="Francois Clad">
<meta property="article:author" content="Xiaohu Xu">
<meta property="article:author" content="Clarence Filsfils">
<meta property="article:author" content="Daniel Bernier">
<meta property="article:author" content="Cheng Li">
<meta property="article:author" content="Bruno Decraene">
<meta property="article:author" content="Shaowen Ma">
<meta property="article:author" content="Chaitanya Yadlapalli">
<meta property="article:author" content="Wim Henderickx">
<meta property="article:author" content="Stefano Salsano">



        
        <style>
            
            .diff-form .select2-selection__rendered {
                direction: rtl;
                text-align: left;
            }
        </style>
    </head>
    <body>
        
        <noscript><iframe class="status" title="Site status" src="/status/latest"></iframe></noscript>
<div class="vue-embed" data-component="Status"></div>
        <div class="btn-toolbar sidebar-toolbar position-fixed top-0 end-0 m-2 m-lg-3 d-print-none">
            <div class="dropdown">
                <button class="btn btn-outline-secondary btn-sm me-1 dropdown-toggle d-flex align-items-center"
                    id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown"
                    aria-label="Toggle theme">
                        <i class="theme-icon-active bi bi-circle-half"></i>
                </button>

                <ul class="dropdown-menu" aria-labelledby="bd-theme">
                    <li>
                        <button type="button" class="dropdown-item d-flex align-items-center"
                            data-bs-theme-value="light" aria-pressed="false">
                            <i class="me-2 opacity-50 theme-icon bi bi-sun-fill"></i>
                            Light<i class="bi bi-check2 ms-auto d-none"></i>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="dropdown-item d-flex align-items-center"
                            data-bs-theme-value="dark" aria-pressed="false">
                            <i class="me-2 opacity-50 theme-icon bi bi-moon-stars-fill"></i>
                            Dark<i class="bi bi-check2 ms-auto d-none"></i>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="dropdown-item d-flex align-items-center active"
                            data-bs-theme-value="auto" aria-pressed="true">
                            <i class="me-2 opacity-50 theme-icon bi bi-circle-half"></i>
                            Auto<i class="bi bi-check2 ms-auto d-none"></i>
                        </button>
                    </li>
                </ul>
            </div>
            <button class="btn btn-outline-secondary btn-sm sidebar-toggle"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#sidebar"
                    aria-expanded="true"
                    aria-controls="sidebar"
                    aria-label="Toggle metadata sidebar"
                    title="Toggle metadata sidebar">
            <i class="bi bi-arrow-bar-left sidebar-shown"></i>
            <i class="bi bi-arrow-bar-right sidebar-collapsed"></i>
            </button>
        </div>
        <nav class="navbar bg-light-subtle px-1 fixed-top d-print-none d-md-none">
            <a class="nav-link ps-1"
               href="/doc/draft-ietf-spring-sr-service-programming/">
                 
                    draft-ietf-spring-sr-service-programming-09
                
                <br class="d-sm-none">

                <span class="ms-sm-3 badge rounded-pill badge-draft">
                    
                        Internet-Draft
                    
                </span>
            </a>
            <button class="navbar-toggler p-1"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#docinfo-collapse"
                    aria-controls="docinfo-collapse"
                    aria-expanded="false"
                    aria-label="Show document information">
                <span class="navbar-toggler-icon small"></span>
            </button>
            <div class="navbar-nav navbar-nav-scroll overscroll-none collapse pt-1" id="docinfo-collapse">
                <div class="bg-light-subtle p-0">
                    <table class="table table-sm table-borderless small">
                        <tbody class="meta align-top">
                            <tr>
                                <th scope="row"></th>
                                <th scope="row">Title</th>
                                <td class="edit"></td>
                                <td>Service Programming with Segment Routing</td>
                            </tr>
                        </tbody>
                        







<tbody class="meta align-top ">
    <tr>
        <th scope="row">Document</th>
        <th scope="row">Document type</th>
        <td class="edit"></td>
        <td>
            







    <div>This is an older version of an Internet-Draft whose latest revision state is "Active".</div>

            
            
                <div class="badge rounded-pill text-bg-warning">
                    Expired &amp; archived
                </div>
            
            
                




    

            
        </td>
    </tr>
    
        <tr>
            <td></td>
            <th scope="row">Select version</th>
            <td class="edit"></td>
            <td>
                



    <ul class="revision-list pagination pagination-sm text-center flex-wrap my-0">
        
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-00"
                        >
                            00
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-01"
                        rel="nofollow">
                            01
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-02"
                        rel="nofollow">
                            02
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-03"
                        rel="nofollow">
                            03
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-04"
                        rel="nofollow">
                            04
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-05"
                        rel="nofollow">
                            05
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-06"
                        rel="nofollow">
                            06
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-07"
                        rel="nofollow">
                            07
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-08"
                        rel="nofollow">
                            08
                        </a>
                    </li>
                
            
                 
                    <li class="page-item active">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-09"
                        rel="nofollow">
                            09
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-10"
                        >
                            10
                        </a>
                    </li>
                
            
            
        
    </ul>

            </td>
        </tr>
        
            <tr>
                <td></td>
                <th scope="row">Compare versions</th>
                <td class="edit"></td>
                <td>
                    



<form class="form-horizontal diff-form"
      action="https://author-tools.ietf.org/iddiff"
      method="get"
      target="_blank">

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="From revision"
                    name="url1">
                
                    <option value="draft-ietf-spring-sr-service-programming-10">
                        draft-ietf-spring-sr-service-programming-10
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-09" selected>
                        draft-ietf-spring-sr-service-programming-09
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-08">
                        draft-ietf-spring-sr-service-programming-08
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-07">
                        draft-ietf-spring-sr-service-programming-07
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-06">
                        draft-ietf-spring-sr-service-programming-06
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-05">
                        draft-ietf-spring-sr-service-programming-05
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-04">
                        draft-ietf-spring-sr-service-programming-04
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-03">
                        draft-ietf-spring-sr-service-programming-03
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-02">
                        draft-ietf-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-01">
                        draft-ietf-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-00">
                        draft-ietf-spring-sr-service-programming-00
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-02">
                        draft-xuclad-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-01">
                        draft-xuclad-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-00">
                        draft-xuclad-spring-sr-service-programming-00
                        
                    </option>
                
                
            </select>

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="To revision"
                    name="url2">
                
                    <option value="draft-ietf-spring-sr-service-programming-10" selected>
                        draft-ietf-spring-sr-service-programming-10
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-09">
                        draft-ietf-spring-sr-service-programming-09
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-08">
                        draft-ietf-spring-sr-service-programming-08
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-07">
                        draft-ietf-spring-sr-service-programming-07
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-06">
                        draft-ietf-spring-sr-service-programming-06
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-05">
                        draft-ietf-spring-sr-service-programming-05
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-04">
                        draft-ietf-spring-sr-service-programming-04
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-03">
                        draft-ietf-spring-sr-service-programming-03
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-02">
                        draft-ietf-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-01">
                        draft-ietf-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-00">
                        draft-ietf-spring-sr-service-programming-00
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-02">
                        draft-xuclad-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-01">
                        draft-xuclad-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-00">
                        draft-xuclad-spring-sr-service-programming-00
                        
                    </option>
                
                
            </select>

            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--html"
                    name="difftype">
                Side-by-side
            </button>
            
            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--hwdiff"
                    name="difftype">
                Inline
            </button>

</form>
                </td>
            </tr>
        
    
    <tr>
        <td></td>
        <th scope="row">Authors</th>
        <td class="edit">
            
        </td>
        <td>
            
            
                <span ><a 
           title="Datatracker profile of Francois Clad"
            href="/person/fclad.ietf@gmail.com" >Francois Clad</a> <a 
               href="mailto:fclad.ietf%40gmail.com"
               aria-label="Compose email to fclad.ietf@gmail.com"
               title="Compose email to fclad.ietf@gmail.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Xiaohu Xu"
            href="/person/xuxiaohu@huawei.com" >Xiaohu Xu</a> <a 
               href="mailto:xuxiaohu%40huawei.com"
               aria-label="Compose email to xuxiaohu@huawei.com"
               title="Compose email to xuxiaohu@huawei.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Clarence Filsfils"
            href="/person/cfilsfil@cisco.com" >Clarence Filsfils</a> <a 
               href="mailto:cfilsfil%40cisco.com"
               aria-label="Compose email to cfilsfil@cisco.com"
               title="Compose email to cfilsfil@cisco.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Daniel Bernier"
            href="/person/daniel.bernier@bell.ca" >Daniel Bernier</a> <a 
               href="mailto:daniel.bernier%40bell.ca"
               aria-label="Compose email to daniel.bernier@bell.ca"
               title="Compose email to daniel.bernier@bell.ca">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Cheng Li"
            href="/person/c.l@huawei.com" >Cheng Li</a> <a 
               href="mailto:c.l%40huawei.com"
               aria-label="Compose email to c.l@huawei.com"
               title="Compose email to c.l@huawei.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Bruno Decraene"
            href="/person/bruno.decraene@orange.com" >Bruno Decraene</a> <a 
               href="mailto:bruno.decraene%40orange.com"
               aria-label="Compose email to bruno.decraene@orange.com"
               title="Compose email to bruno.decraene@orange.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Shaowen Ma"
            href="/person/shaowen@google.com" >Shaowen Ma</a> <a 
               href="mailto:shaowen%40google.com"
               aria-label="Compose email to shaowen@google.com"
               title="Compose email to shaowen@google.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Chaitanya Yadlapalli"
            href="/person/cy098d@att.com" >Chaitanya Yadlapalli</a> <a 
               href="mailto:cy098d%40att.com"
               aria-label="Compose email to cy098d@att.com"
               title="Compose email to cy098d@att.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Wim Henderickx"
            href="/person/wim.henderickx@gmail.com" >Wim Henderickx</a> <a 
               href="mailto:wim.henderickx%40gmail.com"
               aria-label="Compose email to wim.henderickx@gmail.com"
               title="Compose email to wim.henderickx@gmail.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Stefano Salsano"
            href="/person/stefano.salsano@uniroma2.it" >Stefano Salsano</a> <a 
               href="mailto:stefano.salsano%40uniroma2.it"
               aria-label="Compose email to stefano.salsano@uniroma2.it"
               title="Compose email to stefano.salsano@uniroma2.it">
                <i class="bi bi-envelope"></i></a></span>
            
            
        </td>
    </tr>
    
    
        
            <tr>
                <td></td>
                <th scope="row">Replaces</th>
                <td class="edit">
                    
                </td>
                <td>
                    
                        
                            <a href="/doc/html/draft-xuclad-spring-sr-service-programming" title="Service Programming with Segment Routing">draft-xuclad-spring-sr-service-programming</a>
                        
                    
                </td>
            </tr>
        
        
        
    
    <tr>
        <td></td>
        <th scope="row">
            RFC stream
        </th>
        <td class="edit">
            
        </td>
        <td >
            
                
                
                    
                        



<img alt="IETF Logo"
     class="d-lm-none w-25 mt-1"
     
     
        
             src="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor-white.svg"
        
     
     >

<img alt="IETF Logo"
     class="d-dm-none w-25 mt-1"
     
     
        
             src="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor.svg"
        
     
     >
                    
                
                
            
        </td>
    </tr>
    
    <tr>
        <td></td>
        <th scope="row">
            Other formats
        </th>
        <td class="edit">
        </td>
        <td>
            
                
    <div class="buttonlist">
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-09.txt">
            
                <i class="bi bi-file-text"></i> txt
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-09.html">
            
                <i class="bi bi-file-code"></i> html
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-09.xml">
            
                <i class="bi bi-file-code"></i> xml
            
        </a>
        
    
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="/doc/draft-ietf-spring-sr-service-programming/09/bibtex/">
            
                <i class="bi bi-file-ruled"></i> bibtex
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="/doc/bibxml3/draft-ietf-spring-sr-service-programming-09.xml">
            
                <i class="bi bi-file-code"></i> bibxml
            
        </a>
        
    
</div>

            
        </td>
    </tr>
    
    
        
            <tr>
                <td>
                </td>
                <th scope="row">
                    Additional resources
                </th>
                <td class="edit">
                    
                </td>
                <td>
                    
                        
                        
                            
                                <a href="https://mailarchive.ietf.org/arch/browse/spring/?q=draft-ietf-spring-sr-service-programming">
                                    Mailing list discussion
                                </a>
                            
                        
                    
                </td>
            </tr>
        
    
</tbody>
                        <tr>
                            <th scope="row"></th>
                            <th scope="row"></th>
                            <td class="edit"></td>
                            <td>
                                <a class="btn btn-sm btn-warning mb-3"
                                target="_blank"
                                href="https://github.com/ietf-tools/datatracker/issues/new/choose">
                                    Report a bug
                                    <i class="bi bi-bug"></i>
                                </a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </nav>
        <div class="row g-0">
            <div class="col-md-9 d-flex justify-content-center lh-sm"
                 data-bs-spy="scroll"
                 data-bs-target="#toc-nav"
                 data-bs-smooth-scroll="true"
                 tabindex="0"
                 id="content">
                
                    <div class="rfchtml">
                        <br class="noprint">
                        <div class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Service Programming with Segment Routing</td>
<td class="right">February 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Clad, et al.</td>
<td class="center">Expires 23 August 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">SPRING</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-spring-sr-service-programming-09</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-02-20" class="published">20 February 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-08-23">23 August 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">F. Clad, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">X. Xu, <span class="editor">Ed.</span>
</div>
<div class="org">China Mobile</div>
</div>
<div class="author">
      <div class="author-name">C. Filsfils</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">D. Bernier</div>
<div class="org">Bell Canada</div>
</div>
<div class="author">
      <div class="author-name">C. Li</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">B. Decraene</div>
<div class="org">Orange</div>
</div>
<div class="author">
      <div class="author-name">S. Ma</div>
<div class="org">Mellanox</div>
</div>
<div class="author">
      <div class="author-name">C. Yadlapalli</div>
<div class="org">AT&amp;T</div>
</div>
<div class="author">
      <div class="author-name">W. Henderickx</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">S. Salsano</div>
<div class="org">Universita di Roma "Tor Vergata"</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Service Programming with Segment Routing</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines data plane functionality required to implement service segments and achieve service programming in SR-enabled MPLS and IPv6 networks, as described in the Segment Routing architecture.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 23 August 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-classification-and-steering" class="internal xref">Classification and Steering</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-service-segments" class="internal xref">Service Segments</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-sr-aware-services" class="internal xref">SR-Aware Services</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-sr-unaware-services" class="internal xref">SR-Unaware Services</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-sr-service-policies" class="internal xref">SR Service Policies</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-sr-mpls-data-plane" class="internal xref">SR-MPLS Data Plane</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-srv6-data-plane" class="internal xref">SRv6 Data Plane</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-sr-proxy-behaviors" class="internal xref">SR Proxy Behaviors</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-static-sr-proxy" class="internal xref">Static SR Proxy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="auto internal xref">6.1.1</a>.  <a href="#name-sr-mpls-pseudocode" class="internal xref">SR-MPLS Pseudocode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="auto internal xref">6.1.2</a>.  <a href="#name-srv6-pseudocode" class="internal xref">SRv6 Pseudocode</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-dynamic-sr-proxy" class="internal xref">Dynamic SR Proxy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="auto internal xref">6.2.1</a>.  <a href="#name-sr-mpls-pseudocode-2" class="internal xref">SR-MPLS Pseudocode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="auto internal xref">6.2.2</a>.  <a href="#name-srv6-pseudocode-2" class="internal xref">SRv6 Pseudocode</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-shared-memory-sr-proxy" class="internal xref">Shared Memory SR Proxy</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-masquerading-sr-proxy" class="internal xref">Masquerading SR Proxy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1">
                    <p id="section-toc.1-1.6.2.4.2.1.1"><a href="#section-6.4.1" class="auto internal xref">6.4.1</a>.  <a href="#name-srv6-masquerading-proxy-pse" class="internal xref">SRv6 Masquerading Proxy Pseudocode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.2">
                    <p id="section-toc.1-1.6.2.4.2.2.1"><a href="#section-6.4.2" class="auto internal xref">6.4.2</a>.  <a href="#name-destination-nat-flavor" class="internal xref">Destination NAT Flavor</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.3">
                    <p id="section-toc.1-1.6.2.4.2.3.1"><a href="#section-6.4.3" class="auto internal xref">6.4.3</a>.  <a href="#name-caching-flavor" class="internal xref">Caching Flavor</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-metadata" class="internal xref">Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-mpls-data-plane" class="internal xref">MPLS Data Plane</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-ipv6-data-plane" class="internal xref">IPv6 Data Plane</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="auto internal xref">7.2.1</a>.  <a href="#name-srh-tlv-objects" class="internal xref">SRH TLV Objects</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.2">
                    <p id="section-toc.1-1.7.2.2.2.2.1"><a href="#section-7.2.2" class="auto internal xref">7.2.2</a>.  <a href="#name-srh-tag" class="internal xref">SRH Tag</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-implementation-status" class="internal xref">Implementation Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-sr-aware-services-2" class="internal xref">SR-Aware Services</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-proxy-behaviors" class="internal xref">Proxy Behaviors</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-related-works" class="internal xref">Related Works</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-srv6-endpoint-behaviors" class="internal xref">SRv6 Endpoint Behaviors</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-segment-routing-header-tlvs" class="internal xref">Segment Routing Header TLVs</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="auto internal xref">13.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="auto internal xref">13.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Segment Routing (SR) <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span> is an architecture based on the source routing paradigm that seeks the right balance between distributed intelligence and centralized programmability.  SR can be used with an MPLS or an IPv6 data plane to steer packets through an ordered list of instructions, called segments.  These segments may encode simple routing instructions for forwarding packets along a specific network path, but also steer them through Virtual Network Functions (VNFs) or physical service appliances available in the network.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">In an SR network, each of these services, running either on a physical appliance or in a virtual environment, are associated with a segment identifier (SID). These service SIDs are then leveraged as part of a SID-list to steer packets through the corresponding services.  Service SIDs may be combined together in a SID-list to achieve service programming, but also with other types of segments as defined in <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>.  SR thus provides a fully integrated solution for overlay, underlay and service programming. Furthermore, the IPv6 instantiation of SR (SRv6) <span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span> supports metadata transportation in the Segment Routing Header <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span>, either natively in the tag field or with extensions such as TLVs.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document describes how a service can be associated with a SID, including legacy services with no SR capabilities, and how these service SIDs are integrated within an SR policy. The definition of an SR Policy and the traffic steering mechanisms are covered in <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span> and hence outside the scope of this document.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">The definition of control plane components, such as service segment discovery, is outside the scope of this data plane document.  For reference, the option of using BGP extensions to support SR service programming is proposed in <span>[<a href="#I-D.dawra-idr-bgp-sr-service-chaining" class="cite xref">I-D.dawra-idr-bgp-sr-service-chaining</a>]</span>.<a href="#section-1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">This document leverages the terminology proposed in <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>, <span>[<a href="#RFC8660" class="cite xref">RFC8660</a>]</span>, <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span>, <span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span> and <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span>.  It also introduces the following new terms.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Service segment: A segment associated with a service. The service may either run on a physical appliance or in a virtual environment such as a virtual machine or container.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">SR-aware service: A service that is fully capable of processing SR traffic. An SR-aware service can be directly associated with a service segment.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">SR-unaware service: A service that is unable to process SR traffic or may behave incorrectly due to presence of SR information in the packet headers. An SR-unaware service can be associated with a service segment through an SR proxy function.<a href="#section-2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="classification-and-steering">
<section id="section-3">
      <h2 id="name-classification-and-steering">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-classification-and-steering" class="section-name selfRef">Classification and Steering</a>
      </h2>
<p id="section-3-1">Classification and steering mechanisms are defined in section 8 of <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span> and are independent from the purpose of the SR policy.  From the perspective of a headend node classifying and steering traffic into an SR policy, there is no difference whether this policy contains IGP, BGP, peering, VPN or service segments, or any combination of these.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">As documented in the above reference, traffic is classified when entering an SR domain.  The SR policy headend may, depending on its capabilities, classify the packets on a per-destination basis, via simple FIB entries, or apply more complex policy routing rules requiring to look deeper into the packet.  These rules are expected to support basic policy routing such as 5-tuple matching.  In addition, the IPv6 SRH tag field defined in <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span> can be used to identify and classify packets sharing the same set of properties.  Classified traffic is then steered into the appropriate SR policy and forwarded as per the SID-list(s) of the active candidate path.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">SR traffic can be re-classified by an SR endpoint along the original SR policy (e.g., DPI service) or a transit node intercepting the traffic.  This node is the head-end of a new SR policy that is imposed onto the packet, either as a stack of MPLS labels or as an IPv6 SRH.<a href="#section-3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="service-segments">
<section id="section-4">
      <h2 id="name-service-segments">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-service-segments" class="section-name selfRef">Service Segments</a>
      </h2>
<p id="section-4-1">In the context of this document, the term service refers to a physical appliance running on dedicated hardware, a virtualized service inside an isolated environment such as a Virtual Machine (VM), container or namespace, or any process running on a compute element.  A service may also comprise multiple sub-components running in different processes or containers.  Unless otherwise stated, this document does not make any assumption on the type or execution environment of a service.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The execution of a service can be integrated as part of an SR policy by assigning a segment identifier, or SID, to the service and including this service SID in the SR policy SID-list.  Such a service SID may be of local or global significance. In the former case, other segments, such as prefix or adjacency segments, can be used to steer the traffic up to the node where the service segment is instantiated. In the latter case, the service is directly reachable from anywhere in the routing domain.  This is realized with SR-MPLS by assigning a SID from the global label block (<span>[<a href="#RFC8660" class="cite xref">RFC8660</a>]</span>), or with SRv6 by advertising the SID locator in the routing protocol (<span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span>).  It is up to the network operator to define the scope and reachability of each service SID.  This decision can be based on various considerations such as infrastructure dynamicity, available control plane or orchestration system capabilities.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">This document categorizes services in two types, depending on whether they are able to behave properly in the presence of SR information or not. These are respectively named SR-aware and SR-unaware services.<a href="#section-4-3" class="pilcrow">¶</a></p>
<div id="sr-aware-services">
<section id="section-4.1">
        <h3 id="name-sr-aware-services">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-sr-aware-services" class="section-name selfRef">SR-Aware Services</a>
        </h3>
<p id="section-4.1-1">An SR-aware service can process the SR information in the packets it receives. This means being able to identify the active segment as a local instruction and move forward in the segment list, but also that the service's own behavior is not hindered due to the presence of SR information.  For example, an SR-aware firewall filtering SRv6 traffic based on its final destination must retrieve that information from the last entry in the SRH rather than the Destination Address field of the IPv6 header.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">An SR-aware service is associated with a locally instantiated service segment, which is used to steer traffic through it.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">If the service is configured to intercept all the packets passing through the appliance, the underlying routing system only has to implement a default SR endpoint behavior (e.g., SR-MPLS node segment or SRv6 End behavior), and the corresponding SID will be used to steer traffic through the service.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">If the service requires the packets to be directed to a specific virtual interface, networking queue or process, a dedicated SR behavior may be required to steer the packets to the appropriate location.  The definition of such service-specific functions is out of the scope of this document.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">SR-aware services also enable advanced network programming functionalities such as conditional branching and jumping to arbitrary SIDs in the segment list. In addition, SRv6 provides several ways of passing and exchanging information between services (e.g., SID arguments, tag field and TLVs). An example scenario involving these features is described in <span>[<a href="#IFIP18" class="cite xref">IFIP18</a>]</span>, which discusses the implementation of an SR-aware Intrusion Detection System.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">Examples of SR-aware services are provided in section <a href="#sec-implem-aware" class="auto internal xref">Section 8.1</a>.<a href="#section-4.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sr-unaware-services">
<section id="section-4.2">
        <h3 id="name-sr-unaware-services">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-sr-unaware-services" class="section-name selfRef">SR-Unaware Services</a>
        </h3>
<p id="section-4.2-1">Any service that does not meet the above criteria for SR-awareness is considered as SR-unaware.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">An SR-unaware service is not able to process the SR information in the traffic that it receives.  It may either drop the traffic or take erroneous decisions due to the unrecognized routing information.  In order to include such services in an SR policy, it is thus required to remove the SR information as well as any other encapsulation header before the service receives the packet, or to alter it in such a way that the service can correctly process the packet.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">In this document, we define the concept of an SR proxy as an entity, separate from the service, that performs these modifications and handle the SR processing on behalf of a service.  The SR proxy can run as a separate process on the service appliance, on a virtual switch or router on the compute node or on a different host.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">An SR-unaware service is associated with a service segment instantiated on the SR proxy, which is used to steer traffic through the service. <a href="#sec-proxies" class="auto internal xref">Section 6</a> describes several SR proxy behaviors to handle the encapsulation headers and SR information under various circumstances.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sr-service-policies">
<section id="section-5">
      <h2 id="name-sr-service-policies">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-sr-service-policies" class="section-name selfRef">SR Service Policies</a>
      </h2>
<p id="section-5-1">An SR service policy is an SR policy, as defined in <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span>, that includes at least one service. This service is represented in the SID-list by its associated service SID. In case the policy should include several services, the service traversal order is indicated by the relative position of each service SID in the SID-list. Using the mechanisms described in <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span>, it is possible to load balance the traffic over several services, or instances of the same service, by associating with the SR service policy a weighted set of SID-lists, each containing a possible sequence of service SIDs to be traversed. Similarly, several candidate paths can be specified for the SR service policy, each with its own set of SID-lists, for resiliency purposes.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Furthermore, binding SIDs (BSIDs) <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span> can be leveraged in the context of service policies to reduce the number of SIDs imposed by the headend, provide opacity between domains and improve scalability. For example, a network operator may want a policy in its core domain to include services that are running in one of its datacenters. One option is to define an SR policy at ingress edge of the core domain that explicitly includes all the SIDs needed to steer the traffic through the core and in the DC, but that may result in a long SID-list and requires to update the ingress edge configuration every time the DC part of the policy is modified. Alternatively, a separate policy can be defined at the ingress edge of the datacenter with only the SIDs that needs to be executed there and its BSID included in the core domain policy. That BSID remains stable when the DC policy is modified and can even be shared among several core domain policies that would require the same type of processing in the DC.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">This section describes how services can be integrated within an SR-MPLS or SRv6 service policy.<a href="#section-5-3" class="pilcrow">¶</a></p>
<span id="name-sr-service-policy"></span><div id="fig-policy">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-5-4.1">
<pre>
     +------------------------------------------+
     |               SR network                 |
     |                                          |
+----+----+          +---------+           +----+-----+
|    H    +----------+    S    +-----------+    E     |
|(headend)|          |(service)|           |(endpoint)|
+----+----+          +---------+           +----+-----+
     |  =====================================&gt;  |
     |     P1(H,E,C)                            |
     +------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-sr-service-policy" class="selfRef">SR service policy</a>
        </figcaption></figure>
</div>
<p id="section-5-5"><a href="#fig-policy" class="auto internal xref">Figure 1</a> illustrates a basic SR service policy instantiated on a headend node H towards an endpoint E and traversing a service S. The SR policy may also include additional requirements, such as traffic engineering or VPN. On the head-end H, the SR policy P1 is created with a color C and endpoint E and associated with an SR path that can either be explicitly configured, dynamically computed on H or provisioned by a network controller.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">In its most basic form, the SR policy P1 would be resolved into the SID-list &lt; SID(S), SID(E) &gt;. This is assuming that SID(S) and SID(E) are directly reachable from H and S, respectively, and that the forwarding path meets the policy requirement. However, depending on the dataplane and the segments available in the network, additional SIDs may be required to enforce the SR policy.<a href="#section-5-6" class="pilcrow">¶</a></p>
<p id="section-5-7">This model applies regardless of the SR-awareness of the service. If it is SR-unaware, then S simply represents the proxy that takes care of transmitting the packet to the actual service.<a href="#section-5-7" class="pilcrow">¶</a></p>
<p id="section-5-8">Traffic can then be steered into this policy using any of the mechanisms described in <span>[<a href="#RFC9256" class="cite xref">RFC9256</a>]</span>.<a href="#section-5-8" class="pilcrow">¶</a></p>
<p id="section-5-9">The following subsections describe the specificities of each SR dataplane.<a href="#section-5-9" class="pilcrow">¶</a></p>
<div id="sec-policy-mpls">
<section id="section-5.1">
        <h3 id="name-sr-mpls-data-plane">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-sr-mpls-data-plane" class="section-name selfRef">SR-MPLS Data Plane</a>
        </h3>
<span id="name-packet-walk-in-an-sr-mpls-n"></span><div id="fig-policy-mpls">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-5.1-1.1">
<pre>
     +-----------------------------------------------+
     |                SR-MPLS network                |
     |                                               |
+----+----+   ------&gt;   +---------+   ------&gt;   +----+-----+
|    H    +-------------+    S    +-------------+    E     |
|(headend)|             |(service)|             |(endpoint)|
+----+----+             +---------+             +----+-----+
     |    (1)         (2)         (3)         (4)    |
     |+---------+ +---------+ +---------+ +---------+|
     ||   ...   | |  L(S)   | |   ...   | |  L(E)   ||
     |+---------+ +---------+ +---------+ +---------+|
     ||  L(S)   | |   ...   | |  L(E)   | |Inner pkt||
     |+---------+ +---------+ +---------+ +---------+|
     ||   ...   | |  L(E)   | |Inner pkt|            |
     |+---------+ +---------+ +---------+            |
     ||  L(E)   | |Inner pkt|                        |
     |+---------+ +---------+                        |
     ||Inner pkt|                                    |
     |+---------+                                    |
     +-----------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-packet-walk-in-an-sr-mpls-n" class="selfRef">Packet walk in an SR-MPLS network</a>
          </figcaption></figure>
</div>
<p id="section-5.1-2">In an SR-MPLS network, the SR policy SID-list is encoded as a stack of MPLS labels <span>[<a href="#RFC8660" class="cite xref">RFC8660</a>]</span> and pushed on top of the packet.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">In the example shown on <a href="#fig-policy-mpls" class="auto internal xref">Figure 2</a>, the SR policy should steer the traffic from the head-end H to the endpoint E via a service S. This translates into an MPLS label stack that includes at least a label L(S) associated to service S and a label L(E) associated to the endpoint E. The label stack may also include additional intermediate SIDs if these are required for traffic engineering (e.g., to encode a low latency path between H and S and / or between S and E) or simply for reachability purposes. Indeed, the service SID L(S) may be taken from the global or local SID block of node S and, in the latter case, one or more SIDs might be needed before L(S) in order for the packet to reach node S (e.g., a prefix-SID of S), where L(S) can be interpreted. The same applies for the SID L(E) at the SR policy endpoint.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">Special consideration must be taken into account when using Local SIDs for service identification due to increased label stack depth and the associated impacts.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">When the packet arrives at S, this node determines the MPLS payload type and the appropriate behavior for processing the packet based on the semantic locally associated to the top label L(S). If S is an SR-aware service, the SID L(S) may provide additional context or indication on how to process the packet (e.g., a firewall SID may indicate which rule set should be applied onto the packet). If S is a proxy in front of an SR-unaware service, L(S) indicates how and to which service attached to this proxy the packet should be transmitted. At some point in the process, L(S) is also popped from the label stack in order to expose the next SID, which may be L(E) or another intermediate SID.<a href="#section-5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-policy-srv6">
<section id="section-5.2">
        <h3 id="name-srv6-data-plane">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-srv6-data-plane" class="section-name selfRef">SRv6 Data Plane</a>
        </h3>
<span id="name-packet-walk-in-an-srv6-netw"></span><div id="fig-policy-srv6">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-5.2-1.1">
<pre>
     +-----------------------------------------------+
     |                 SRv6 network                  |
     |                                               |
+----+----+   ------&gt;   +---------+   ------&gt;   +----+-----+
|    H    +-------------+    S    +-------------+    E     |
|(headend)|             |(service)|             |(endpoint)|
+----+----+             +---------+             +----+-----+
     |    (1)         (2)         (3)         (4)    |
     |+---------+ +---------+ +---------+ +---------+|
     ||IP6(H,..)| |IP6(H, S)| |IP6(H,..)| |IP6(H, E)||
     |+---------+ +---------+ +---------+ +---------+|
     ||SRH(E,..,| |SRH(E,..,| |SRH(E,..,| |SRH(E,..,||
     ||    S,..;| |    S,..;| |    S,..;| |    S,..;||
     ||    SL=i)| |    SL=j)| |    SL=k)| |    SL=0)||
     |+---------+ +---------+ +---------+ +---------+|
     ||Inner pkt| |Inner pkt| |Inner pkt| |Inner pkt||
     |+---------+ +---------+ +---------+ +---------+|
     +-----------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-packet-walk-in-an-srv6-netw" class="selfRef">Packet walk in an SRv6 network</a>
          </figcaption></figure>
</div>
<p id="section-5.2-2">In an SRv6 network, the SR Policy is encoded into the packet as an IPv6 header possibly followed by a Segment Routing Header (SRH) <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span>.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">In the example shown on <a href="#fig-policy-srv6" class="auto internal xref">Figure 3</a>, the SR policy should steer the traffic from the head-end H to the endpoint E via a service S. This translates into Segment-List that includes at least a segment SID(S) to the service, or service proxy, S and a segment SID(E) to the endpoint E. The Segment-List may also include additional intermediate SIDs if these are required for traffic engineering (e.g., the encode a low latency path between H and S and / or between S and E) or simply for reachability purposes. Indeed, the service SID locator may or may not be advertised in the routing protocol and, in the latter case, one or more SIDs might be needed before SID(S) in order to bring the packet up to node S, where SID(S) can be interpreted. The same applies for the segment SID(E) at the SR policy endpoint.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">When the packet arrives at S, this node determines how to process the packet based on the semantic locally associated to the active segment SID(S). If S is an SR-aware service, then SID(S) may provide additional context or indication on how to process the packet (e.g., a firewall SID may indicate which rule set should be applied onto the packet). If S is a proxy in front of an SR-unaware service, SID(S) indicates how and to which service attached to this proxy the packet should be transmitted. At some point in the process, the SRv6 End function is also applied in order to make the next SID, which may be SID(E) or another intermediate SID, active.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2-5">The "Inner pkt" on <a href="#fig-policy-srv6" class="auto internal xref">Figure 3</a> represents the SRv6 payload, which may be an encapsulated IP packet, an Ethernet frame or a transport-layer payload, for example.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-proxies">
<section id="section-6">
      <h2 id="name-sr-proxy-behaviors">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-sr-proxy-behaviors" class="section-name selfRef">SR Proxy Behaviors</a>
      </h2>
<p id="section-6-1">This section describes several SR proxy behaviors designed to enable SR service programming through SR-unaware services.  A system implementing one of these behaviors may handle the SR processing on behalf of an SR-unaware service and allows the service to properly process the traffic that is steered through it.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">A service may be located at any hop in an SR policy, including the last segment.  However, the SR proxy behaviors defined in this section are dedicated to supporting SR-unaware services at intermediate hops in the segment list.  In case an SR-unaware service is at the last segment, it is sufficient to ensure that the SR information is ignored (IPv6 routing extension header with Segments Left equal to 0) or removed before the packet reaches the service (MPLS PHP, SRv6 decapsulation behavior or PSP flavor).<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">As illustrated on <a href="#fig-proxy" class="auto internal xref">Figure 4</a>, the generic behavior of an SR proxy has two parts.  The first part is in charge of passing traffic from the network to the service.  It intercepts the SR traffic destined for the service via a locally instantiated service segment, modifies it in such a way that it appears as non-SR traffic to the service, then sends it out on a given interface, IFACE-OUT, connected to the service.  The second part receives the traffic coming back from the service on IFACE-IN, restores the SR information and forwards it according to the next segment in the list.  IFACE-OUT and IFACE-IN are respectively the proxy interface used for sending traffic to the service and the proxy interface that receives the traffic coming back from the service.  These can be physical interfaces or sub-interfaces (VLANs) and, unless otherwise stated, IFACE-OUT and IFACE-IN can represent the same interface.<a href="#section-6-3" class="pilcrow">¶</a></p>
<span id="name-generic-sr-proxy"></span><div id="fig-proxy">
<figure id="figure-4">
        <div class="alignLeft art-text artwork" id="section-6-4.1">
<pre>
           +----------------------------+
           |                            |
           |           Service          |
           |                            |
           +----------------------------+
                    ^  Non SR   |
                    |  traffic  |
                    |           v
              +-----------+----------+
           +--| IFACE OUT | IFACE IN |--+
SR traffic |  +-----------+----------+  | SR traffic
----------&gt;|          SR proxy          |----------&gt;
           |                            |
           +----------------------------+
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-generic-sr-proxy" class="selfRef">Generic SR proxy</a>
        </figcaption></figure>
</div>
<p id="section-6-5">In the next subsections, the following SR proxy mechanisms are defined:<a href="#section-6-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-6.1">
          <p id="section-6-6.1.1">Static proxy<a href="#section-6-6.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-6.2">
          <p id="section-6-6.2.1">Dynamic proxy<a href="#section-6-6.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-6.3">
          <p id="section-6-6.3.1">Shared-memory proxy<a href="#section-6-6.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-6.4">
          <p id="section-6-6.4.1">Masquerading proxy<a href="#section-6-6.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-6-7">Each mechanism has its own characteristics and constraints, which are summarized in the below table.  It is up to the operator to select the best one based on the proxy node capabilities, the service behavior and the traffic type.  It is also possible to use different proxy mechanisms within the same service policy.<a href="#section-6-7" class="pilcrow">¶</a></p>
<span id="name-sr-proxy-summary"></span><div id="fig-proxy-sum">
<figure id="figure-5">
        <div class="alignLeft art-text artwork" id="section-6-8.1">
<pre>
                                        +-----+-----+-----+-----+
                                        |     |     |     |  M  |
                                        |     |     |  S  |  a  |
                                        |     |     |  h  |  s  |
                                        |     |     |  a  |  q  |
                                        |     |     |  r  |  u  |
                                        |     |  D  |  e  |  e  |
                                        |  S  |  y  |  d  |  r  |
                                        |  t  |  n  |     |  a  |
                                        |  a  |  a  |  m  |  d  |
                                        |  t  |  m  |  e  |  i  |
                                        |  i  |  i  |  m  |  n  |
                                        |  c  |  c  |  .  |  g  |
+---------------------------------------+-----+-----+-----+-----+
|                |       SR-MPLS        |  Y  |  Y  |  Y  |  -  |
|                |                      |     |     |     |     |
|   SR flavors   |     Inline SRv6      |  P  |  P  |  P  |  Y  |
|                |                      |     |     |     |     |
|                |  SRv6 encapsulation  |  Y  |  Y  |  Y  |  -  |
+----------------+----------------------+-----+-----+-----+-----+
|     Chain agnostic configuration      |  N  |  N  |  Y  |  Y  |
+---------------------------------------+-----+-----+-----+-----+
|     Transparent to chain changes      |  N  |  Y  |  Y  |  Y  |
+----------------+----------------------+-----+-----+-----+-----+
|                |   DA modification    |  Y  |  Y  |  Y  | NAT |
|                |                      |     |     |     |     |
|                | Payload modification |  Y  |  Y  |  Y  |  Y  |
|                |                      |     |     |     |     |
|Service support |  Packet generation   |  Y  |  Y  |cache|cache|
|                |                      |     |     |     |     |
|                |   Packet deletion    |  Y  |  Y  |  Y  |  Y  |
|                |                      |     |     |     |     |
|                |  Packet re-ordering  |  Y  |  Y  |  Y  |  Y  |
|                |                      |     |     |     |     |
|                |  Transport endpoint  |  Y  |  Y  |cache|cache|
+----------------+----------------------+-----+-----+-----+-----+
|                |       Ethernet       |  Y  |  Y  |  Y  |  -  |
|   Supported    |                      |     |     |     |     |
|    traffic     |         IPv4         |  Y  |  Y  |  Y  |  -  |
|                |                      |     |     |     |     |
|                |         IPv6         |  Y  |  Y  |  Y  |  Y  |
+----------------+----------------------+-----+-----+-----+-----+
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-sr-proxy-summary" class="selfRef">SR proxy summary</a>
        </figcaption></figure>
</div>
<p id="section-6-9">Note: The use of a shared memory proxy requires both the service (VNF) and the proxy to be running on the same node.<a href="#section-6-9" class="pilcrow">¶</a></p>
<div id="sec-proxies-static">
<section id="section-6.1">
        <h3 id="name-static-sr-proxy">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-static-sr-proxy" class="section-name selfRef">Static SR Proxy</a>
        </h3>
<p id="section-6.1-1">The static proxy is an SR endpoint behavior for processing SR-MPLS or SRv6 encapsulated traffic on behalf of an SR-unaware service.  This proxy thus receives SR traffic that is formed of an MPLS label stack or an IPv6 header on top of an inner packet, which can be Ethernet, IPv4 or IPv6.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">A static SR proxy segment is associated with the following mandatory parameters<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-3.1">
            <p id="section-6.1-3.1.1">INNER-TYPE: Inner packet type<a href="#section-6.1-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-3.2">
            <p id="section-6.1-3.2.1">NH-ADDR: Next hop Ethernet address (only for inner type IPv4 and IPv6)<a href="#section-6.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-3.3">
            <p id="section-6.1-3.3.1">IFACE-OUT: Local interface for sending traffic towards the service<a href="#section-6.1-3.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-3.4">
            <p id="section-6.1-3.4.1">IFACE-IN: Local interface receiving the traffic coming back from the service<a href="#section-6.1-3.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-3.5">
            <p id="section-6.1-3.5.1">CACHE: SR information to be attached on the traffic coming back from the service, including at least<a href="#section-6.1-3.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-3.5.2.1">
                <p id="section-6.1-3.5.2.1.1">CACHE.SA: IPv6 source address (SRv6 only)<a href="#section-6.1-3.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.1-3.5.2.2">
                <p id="section-6.1-3.5.2.2.1">CACHE.LIST: Segment list expressed as MPLS labels or IPv6 address<a href="#section-6.1-3.5.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
<p id="section-6.1-4">A static SR proxy segment is thus defined for a specific service, inner packet type and cached SR information.  It is also bound to a pair of directed interfaces on the proxy.  These may be both directions of a single interface, or opposite directions of two different interfaces. The latter is recommended in case the service is to be used as part of a bi-directional SR service policy.  If the proxy and the service both support 802.1Q, IFACE-OUT and IFACE-IN can also represent sub-interfaces.<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<p id="section-6.1-5">The first part of this behavior is triggered when the proxy node receives a packet whose active segment matches a segment associated with the static proxy behavior.  It removes the SR information from the packet then sends it on a specific interface towards the associated service.  This SR information corresponds to the full label stack for SR-MPLS or to the encapsulation IPv6 header with any attached extension header in the case of SRv6.<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<p id="section-6.1-6">The second part is an inbound policy attached to the proxy interface receiving the traffic returning from the service, IFACE-IN.  This policy attaches to the incoming traffic the cached SR information associated with the SR proxy segment.  If the proxy segment uses the SR-MPLS data plane, CACHE contains a stack of labels to be pushed on top of the packets.  With the SRv6 data plane, CACHE is defined as a source address, an active segment and an optional SRH (tag, segments left, segment list and metadata).  The proxy encapsulates the packets with an IPv6 header that has the source address, the active segment as destination address and the SRH as a routing extension header.  After the SR information has been attached, the packets are forwarded according to the active segment, which is represented by the top MPLS label or the IPv6 Destination Address. An MPLS TTL or IPv6 Hop Limit value may also be configured in CACHE. If it is not, the proxy should set these values according to the node's default setting for MPLS or IPv6 encapsulation.<a href="#section-6.1-6" class="pilcrow">¶</a></p>
<p id="section-6.1-7">In this scenario, there are no restrictions on the operations that can be performed by the service on the stream of packets.  It may operate at all protocol layers, terminate transport layer connections, generate new packets and initiate transport layer connections.  This behavior may also be used to integrate an IPv4-only service into an SRv6 policy.  However, a static SR proxy segment can be used in only one service policy at a time.  As opposed to most other segment types, a static SR proxy segment is bound to a unique list of segments, which represents a directed SR service policy.  This is due to the cached SR information being defined in the segment configuration.  This limitation only prevents multiple segment lists from using the same static SR proxy segment at the same time, but a single segment list can be shared by any number of traffic flows.  Besides, since the returning traffic from the service is re-classified based on the incoming interface, an interface can be used as receiving interface (IFACE-IN) only for a single SR proxy segment at a time.  In the case of a bi-directional SR service policy, a different SR proxy segment and receiving interface are required for the return direction.<a href="#section-6.1-7" class="pilcrow">¶</a></p>
<p id="section-6.1-8">The static proxy behavior may also be used for sending traffic through "bump in the wire" services that are transparent to the IP and Ethernet layers. This type of processing is assumed when the inner traffic type is Ethernet, since the original destination address of the Ethernet frame is preserved when the packet is steered into the SR Policy and likely associated with a node downstream of the policy tail-end. In case the inner type is IP (IPv4 or IPv6), the NH-ADDR parameter may be set to a dummy or broadcast Ethernet address, or simply to the address of the proxy receiving interface (IFACE-IN).<a href="#section-6.1-8" class="pilcrow">¶</a></p>
<div id="sec-proxies-static-mpls">
<section id="section-6.1.1">
          <h4 id="name-sr-mpls-pseudocode">
<a href="#section-6.1.1" class="section-number selfRef">6.1.1. </a><a href="#name-sr-mpls-pseudocode" class="section-name selfRef">SR-MPLS Pseudocode</a>
          </h4>
<div id="static-proxy-for-inner-type-ethernet">
<section id="section-6.1.1.1">
            <h5 id="name-static-proxy-for-inner-type">
<a href="#section-6.1.1.1" class="section-number selfRef">6.1.1.1. </a><a href="#name-static-proxy-for-inner-type" class="section-name selfRef">Static Proxy for Inner Type Ethernet</a>
            </h5>
<p id="section-6.1.1.1-1">When processing an MPLS packet whose top label matches a locally instantiated
MPLS static proxy SID for Ethernet traffic, the following pseudocode is
executed.<a href="#section-6.1.1.1-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-mpls-sta"></span><div id="code-static-mpls-eth-sid">
<figure id="figure-6">
              <div class="alignLeft art-text artwork" id="section-6.1.1.1-2.1">
<pre>
S01. POP all labels in the MPLS label stack.
S02. Submit the frame to the Ethernet module for transmission via
     interface IFACE-OUT.
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-sid-processing-for-mpls-sta" class="selfRef">SID processing for MPLS static proxy (Ethernet)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.1.1-3">When processing an Ethernet frame received on the interface IFACE-IN and with a
destination MAC address that is neither a broadcast address nor matches the
address of IFACE-IN, the following pseudocode is executed.<a href="#section-6.1.1.1-3" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-mpls-sta"></span><div id="code-static-mpls-eth-inbound">
<figure id="figure-7">
              <div class="alignLeft art-text artwork" id="section-6.1.1.1-4.1">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   Remove the preamble or Frame Check Sequence (FCS).
S04.   PUSH all labels from the retrieved CACHE entry.
S05.   Submit the packet to the MPLS module for transmission as per
       the top label in the MPLS label stack.
S06. }
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-inbound-policy-for-mpls-sta" class="selfRef">Inbound policy for MPLS static proxy (Ethernet)</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="static-proxy-for-inner-type-ipv4">
<section id="section-6.1.1.2">
            <h5 id="name-static-proxy-for-inner-type-">
<a href="#section-6.1.1.2" class="section-number selfRef">6.1.1.2. </a><a href="#name-static-proxy-for-inner-type-" class="section-name selfRef">Static Proxy for Inner Type IPv4</a>
            </h5>
<p id="section-6.1.1.2-1">When processing an MPLS packet whose top label matches a locally instantiated
MPLS static proxy SID for IPv4 traffic, the following pseudocode is
executed.<a href="#section-6.1.1.2-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-mpls-stat"></span><div id="code-static-mpls-ipv4-sid">
<figure id="figure-8">
              <div class="alignLeft art-text artwork" id="section-6.1.1.2-2.1">
<pre>
S01. POP all labels in the MPLS label stack.
S02. Submit the packet to the IPv4 module for transmission on
     interface IFACE-OUT via NH-ADDR.
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-sid-processing-for-mpls-stat" class="selfRef">SID processing for MPLS static proxy (IPv4)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.1.2-3">When processing an IPv4 packet received on the interface IFACE-IN and with a
destination address that does not match any address of IFACE-IN, the following
pseudocode is executed.<a href="#section-6.1.1.2-3" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-mpls-stat"></span><div id="code-static-mpls-ipv4-inbound">
<figure id="figure-9">
              <div class="alignLeft art-text artwork" id="section-6.1.1.2-4.1">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   Decrement the TTL and adjust the checksum accordingly.
S04.   PUSH all labels from the retrieved CACHE entry.
S05.   Submit the packet to the MPLS module for transmission as per
       the top label in the MPLS label stack.
S06. }
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-inbound-policy-for-mpls-stat" class="selfRef">Inbound policy for MPLS static proxy (IPv4)</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="static-proxy-for-inner-type-ipv6">
<section id="section-6.1.1.3">
            <h5 id="name-static-proxy-for-inner-type-i">
<a href="#section-6.1.1.3" class="section-number selfRef">6.1.1.3. </a><a href="#name-static-proxy-for-inner-type-i" class="section-name selfRef">Static Proxy for Inner Type IPv6</a>
            </h5>
<p id="section-6.1.1.3-1">When processing an MPLS packet whose top label matches a locally instantiated
MPLS static proxy SID for IPv6 traffic, the following pseudocode is
executed.<a href="#section-6.1.1.3-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-mpls-stati"></span><div id="code-static-mpls-ipv6-sid">
<figure id="figure-10">
              <div class="alignLeft art-text artwork" id="section-6.1.1.3-2.1">
<pre>
S01. POP all labels in the MPLS label stack.
S02. Submit the packet to the IPv6 module for transmission on
     interface IFACE-OUT via NH-ADDR.
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-sid-processing-for-mpls-stati" class="selfRef">SID processing for MPLS static proxy (IPv6)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.1.3-3">When processing an IPv6 packet received on the interface IFACE-IN and with a
destination address that does not match any address of IFACE-IN, the following
pseudocode is executed.<a href="#section-6.1.1.3-3" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-mpls-stati"></span><div id="code-static-mpls-ipv6-inbound">
<figure id="figure-11">
              <div class="alignLeft art-text artwork" id="section-6.1.1.3-4.1">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   Decrement the Hop Limit.
S04.   PUSH all labels from the retrieved CACHE entry.
S05.   Submit the packet to the MPLS module for transmission as per
       the top label in the MPLS label stack.
S06. }
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-inbound-policy-for-mpls-stati" class="selfRef">Inbound policy for MPLS static proxy (IPv6)</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="sec-proxies-static-srv6">
<section id="section-6.1.2">
          <h4 id="name-srv6-pseudocode">
<a href="#section-6.1.2" class="section-number selfRef">6.1.2. </a><a href="#name-srv6-pseudocode" class="section-name selfRef">SRv6 Pseudocode</a>
          </h4>
<div id="static-proxy-for-inner-type-ethernet-1">
<section id="section-6.1.2.1">
            <h5 id="name-static-proxy-for-inner-type-e">
<a href="#section-6.1.2.1" class="section-number selfRef">6.1.2.1. </a><a href="#name-static-proxy-for-inner-type-e" class="section-name selfRef">Static Proxy for Inner Type Ethernet</a>
            </h5>
<p id="section-6.1.2.1-1">When processing an IPv6 packet matching a FIB entry locally instantiated as an
SRv6 static proxy SID for Ethernet traffic, the following pseudocode is
executed.<a href="#section-6.1.2.1-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-srv6-sta"></span><div id="code-static-srv6-eth-sid">
<figure id="figure-12">
              <div class="alignLeft art-text artwork" id="section-6.1.2.1-2.1">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.     Proceed to process the next header in the packet.
S04.   }
S05.   If (IPv6 Hop Limit &lt;= 1) {
S06.     Send an ICMP Time Exceeded message to the Source Address,
         Code 0 (hop limit exceeded in transit),
         Interrupt packet processing and discard the packet.
S07.   }
S08.   max_last_entry = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry &gt; max_last_entry) or
           (Segments Left &gt; (Last Entry + 1))) {
S10.     Send an ICMP Parameter Problem message to the Source Address,
         Code 0 (Erroneous header field encountered),
         Pointer set to the Segments Left field,
         Interrupt packet processing and discard the packet.
S11.   }
S12.   Decrement Hop Limit by 1.
S13.   Decrement Segments Left by 1.
S14.   Copy Segment List[Segments Left] from the SRH to the
       Destination Address of the IPv6 header.
S15.   If (Upper-layer header type != 143 (Ethernet)) {
S16.     Resubmit the packet to the IPv6 module for transmission to
         the new destination.
S17.   }
S18.   Perform IPv6 decapsulation.
S19.   Submit the frame to the Ethernet module for transmission via
       interface IFACE-OUT.
S20. }
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-sid-processing-for-srv6-sta" class="selfRef">SID processing for SRv6 static proxy (Ethernet)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.1-3">S15: 143 (Ethernet) refers to the value assigned by IANA for "Ethernet" in the
"Internet Protocol Numbers" registry.<a href="#section-6.1.2.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1.2.1-4">When processing the Upper-layer header of a packet matching a FIB entry locally
instantiated as an SRv6 static proxy SID for Ethernet traffic, the following
pseudocode is executed.<a href="#section-6.1.2.1-4" class="pilcrow">¶</a></p>
<span id="name-upper-layer-header-processi"></span><div id="code-static-srv6-eth-ulh">
<figure id="figure-13">
              <div class="alignLeft art-text artwork" id="section-6.1.2.1-5.1">
<pre>
S01. If (Upper-layer header type != 143 (Ethernet)) {
S02.   Process as per [RFC8986] Section 4.1.1
S03. }
S04. Perform IPv6 decapsulation.
S05. Submit the frame to the Ethernet module for transmission via
     interface IFACE-OUT.
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-upper-layer-header-processi" class="selfRef">Upper-layer header processing for SRv6 static proxy (Ethernet)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.1-6">When processing an Ethernet frame received on the interface IFACE-IN and with a
destination MAC address that is neither a broadcast address nor matches the
address of IFACE-IN, the following pseudocode is executed.<a href="#section-6.1.2.1-6" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-srv6-sta"></span><div id="code-static-srv6-eth-inbound">
<figure id="figure-14">
              <div class="alignLeft art-text artwork" id="section-6.1.2.1-7.1">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   Remove the preamble or Frame Check Sequence (FCS).
S04.   Perform IPv6 encapsulation with an SRH
         Source Address of the IPv6 header is set to CACHE.SA,
         Destination Address of the IPv6 header is set to
         CACHE.LIST[0],
         Next Header of the SRH is set to 143 (Ethernet),
         Segment List of the SRH is set to CACHE.LIST.
S05.   Submit the packet to the IPv6 module for transmission to the
       next destination.
S06. }
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-inbound-policy-for-srv6-sta" class="selfRef">Inbound policy for SRv6 static proxy (Ethernet)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.1-8">S04: CACHE.LIST[0] represents the first entry in CACHE.LIST. Unless a local
configuration indicates otherwise, the SIDs in CACHE.LIST should be encoded
in the Segment List field in reversed order, the Segment Left and Last Entry
values should be set of the length of CACHE.LIST minus 1. If CACHE.LIST contains
a single entry, the SRH can be omitted and the Next Header field of the IPv6
header set to 143 (Ethernet).<a href="#section-6.1.2.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="static-proxy-for-inner-type-ipv4-1">
<section id="section-6.1.2.2">
            <h5 id="name-static-proxy-for-inner-type-ip">
<a href="#section-6.1.2.2" class="section-number selfRef">6.1.2.2. </a><a href="#name-static-proxy-for-inner-type-ip" class="section-name selfRef">Static Proxy for Inner Type IPv4</a>
            </h5>
<p id="section-6.1.2.2-1">When processing an IPv6 packet matching a FIB entry locally instantiated as an
SRv6 static proxy SID for IPv4 traffic, the following pseudocode is executed.<a href="#section-6.1.2.2-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-srv6-stat"></span><div id="code-static-srv6-ipv4-sid">
<figure id="figure-15">
              <div class="alignLeft art-text artwork" id="section-6.1.2.2-2.1">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.     Proceed to process the next header in the packet.
S04.   }
S05.   If (IPv6 Hop Limit &lt;= 1) {
S06.     Send an ICMP Time Exceeded message to the Source Address,
         Code 0 (hop limit exceeded in transit),
         Interrupt packet processing and discard the packet.
S07.   }
S08.   max_last_entry = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry &gt; max_last_entry) or
           (Segments Left &gt; (Last Entry + 1))) {
S10.     Send an ICMP Parameter Problem message to the Source Address,
         Code 0 (Erroneous header field encountered),
         Pointer set to the Segments Left field,
         Interrupt packet processing and discard the packet.
S11.   }
S12.   Decrement Hop Limit by 1.
S13.   Decrement Segments Left by 1.
S14.   Copy Segment List[Segments Left] from the SRH to the
       Destination Address of the IPv6 header.
S15.   If (Upper-layer header type != 4 (IPv4)) {
S16.     Resubmit the packet to the IPv6 module for transmission to
         the new destination.
S17.   }
S18.   Perform IPv6 decapsulation.
S19.   Submit the packet to the IPv4 module for transmission on
       interface IFACE-OUT via NH-ADDR.
S20. }
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-sid-processing-for-srv6-stat" class="selfRef">SID processing for SRv6 static proxy (IPv4)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.2-3">When processing the Upper-layer header of a packet matching a FIB entry locally
instantiated as an SRv6 static proxy SID for IPv4 traffic, the following
pseudocode is executed.<a href="#section-6.1.2.2-3" class="pilcrow">¶</a></p>
<span id="name-upper-layer-header-processin"></span><div id="code-static-srv6-ipv4-ulh">
<figure id="figure-16">
              <div class="alignLeft art-text artwork" id="section-6.1.2.2-4.1">
<pre>
S01. If (Upper-layer header type != 4 (IPv4)) {
S02.   Process as per [RFC8986] Section 4.1.1
S03. }
S04. Perform IPv6 decapsulation.
S05. Submit the packet to the IPv4 module for transmission on
     interface IFACE-OUT via NH-ADDR.
</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-upper-layer-header-processin" class="selfRef">Upper-layer header processing for SRv6 static proxy (IPv4)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.2-5">When processing an IPv4 packet received on the interface IFACE-IN and with a
destination address that does not match any address of IFACE-IN, the following
pseudocode is executed.<a href="#section-6.1.2.2-5" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-srv6-stat"></span><div id="code-static-srv6-ipv4-inbound">
<figure id="figure-17">
              <div class="alignLeft art-text artwork" id="section-6.1.2.2-6.1">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   Decrement the TTL and adjust the checksum accordingly.
S04.   Perform IPv6 encapsulation with an SRH
         Source Address of the IPv6 header is set to CACHE.SA,
         Destination Address of the IPv6 header is set to
         CACHE.LIST[0],
         Next Header of the SRH is set to 4 (IPv4),
         Segment List of the SRH is set to CACHE.LIST.
S05.   Submit the packet to the IPv6 module for transmission to the
       next destination.
S06. }
</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-inbound-policy-for-srv6-stat" class="selfRef">Inbound policy for SRv6 static proxy (IPv4)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.2-7">S04: CACHE.LIST[0] represents the first entry in CACHE.LIST. Unless a local
configuration indicates otherwise, the SIDs in CACHE.LIST should be encoded
in the Segment List field in reversed order, the Segment Left and Last Entry
values should be set of the length of CACHE.LIST minus 1. If CACHE.LIST contains
a single entry, the SRH can be omitted and the Next Header field of the IPv6
header set to 4 (IPv4).<a href="#section-6.1.2.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="static-proxy-for-inner-type-ipv6-1">
<section id="section-6.1.2.3">
            <h5 id="name-static-proxy-for-inner-type-ipv">
<a href="#section-6.1.2.3" class="section-number selfRef">6.1.2.3. </a><a href="#name-static-proxy-for-inner-type-ipv" class="section-name selfRef">Static Proxy for Inner Type IPv6</a>
            </h5>
<p id="section-6.1.2.3-1">When processing an IPv6 packet matching a FIB entry locally instantiated as an
SRv6 static proxy SID for IPv6 traffic, the following pseudocode is executed.<a href="#section-6.1.2.3-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-srv6-stati"></span><div id="code-static-srv6-ipv6-sid">
<figure id="figure-18">
              <div class="alignLeft art-text artwork" id="section-6.1.2.3-2.1">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.     Proceed to process the next header in the packet.
S04.   }
S05.   If (IPv6 Hop Limit &lt;= 1) {
S06.     Send an ICMP Time Exceeded message to the Source Address,
         Code 0 (hop limit exceeded in transit),
         Interrupt packet processing and discard the packet.
S07.   }
S08.   max_last_entry = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry &gt; max_last_entry) or
           (Segments Left &gt; (Last Entry + 1))) {
S10.     Send an ICMP Parameter Problem message to the Source Address,
         Code 0 (Erroneous header field encountered),
         Pointer set to the Segments Left field,
         Interrupt packet processing and discard the packet.
S11.   }
S12.   Decrement Hop Limit by 1.
S13.   Decrement Segments Left by 1.
S14.   Copy Segment List[Segments Left] from the SRH to the
       Destination Address of the IPv6 header.
S15.   If (Upper-layer header type != 41 (IPv6)) {
S16.     Resubmit the packet to the IPv6 module for transmission to
         the new destination.
S17.   }
S18.   Perform IPv6 decapsulation.
S19.   Submit the packet to the IPv6 module for transmission on
       interface IFACE-OUT via NH-ADDR.
S20. }
</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-sid-processing-for-srv6-stati" class="selfRef">SID processing for SRv6 static proxy (IPv6)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.3-3">When processing the Upper-layer header of a packet matching a FIB entry locally
instantiated as an SRv6 static proxy SID for IPv6 traffic, the following
pseudocode is executed.<a href="#section-6.1.2.3-3" class="pilcrow">¶</a></p>
<span id="name-upper-layer-header-processing"></span><div id="code-static-srv6-ipv6-ulh">
<figure id="figure-19">
              <div class="alignLeft art-text artwork" id="section-6.1.2.3-4.1">
<pre>
S01. If (Upper-layer header type != 41 (IPv6)) {
S02.   Process as per [RFC8986] Section 4.1.1
S03. }
S04. Perform IPv6 decapsulation.
S05. Submit the packet to the IPv6 module for transmission on
     interface IFACE-OUT via NH-ADDR.
</pre>
</div>
<figcaption><a href="#figure-19" class="selfRef">Figure 19</a>:
<a href="#name-upper-layer-header-processing" class="selfRef">Upper-layer header processing for SRv6 static proxy (IPv6)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.3-5">When processing an IPv6 packet received on the interface IFACE-IN and with a
destination address that does not match any address of IFACE-IN, the following
pseudocode is executed.<a href="#section-6.1.2.3-5" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-srv6-stati"></span><div id="code-static-srv6-ipv6-inbound">
<figure id="figure-20">
              <div class="alignLeft art-text artwork" id="section-6.1.2.3-6.1">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   Decrement the Hop Limit.
S04.   Perform IPv6 encapsulation with an SRH
         Source Address of the IPv6 header is set to CACHE.SA,
         Destination Address of the IPv6 header is set to
         CACHE.LIST[0],
         Next Header of the SRH is set to 41 (IPv6),
         Segment List of the SRH is set to CACHE.LIST.
S05.   Submit the packet to the IPv6 module for transmission to the
       next destination.
S06. }
</pre>
</div>
<figcaption><a href="#figure-20" class="selfRef">Figure 20</a>:
<a href="#name-inbound-policy-for-srv6-stati" class="selfRef">Inbound policy for SRv6 static proxy (IPv6)</a>
              </figcaption></figure>
</div>
<p id="section-6.1.2.3-7">S04: CACHE.LIST[0] represents the first entry in CACHE.LIST. Unless a local
configuration indicates otherwise, the SIDs in CACHE.LIST should be encoded
in the Segment List field in reversed order, the Segment Left and Last Entry
values should be set of the length of CACHE.LIST minus 1. If CACHE.LIST contains
a single entry, the SRH can be omitted and the Next Header field of the (outer)
IPv6 header set to 41 (IPv6).<a href="#section-6.1.2.3-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sec-proxies-dynamic">
<section id="section-6.2">
        <h3 id="name-dynamic-sr-proxy">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-dynamic-sr-proxy" class="section-name selfRef">Dynamic SR Proxy</a>
        </h3>
<p id="section-6.2-1">The dynamic proxy is an improvement over the static proxy that dynamically learns the SR information before removing it from the incoming traffic.  The same information can then be re-attached to the traffic returning from the service.  As opposed to the static SR proxy, no CACHE information needs to be configured.  Instead, the dynamic SR proxy relies on a local caching mechanism on the node instantiating this segment.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">Upon receiving a packet whose active segment matches a dynamic SR proxy function, the proxy node pops the top MPLS label or applies the SRv6 End behavior, then compares the updated SR information with the cache entry for the current segment.  If the cache is empty or different, it is updated with the new SR information.  The SR information is then removed and the inner packet is sent towards the service.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">The cache entry is not mapped to any particular packet, but instead to an SR service policy identified by the receiving interface (IFACE-IN). Any non-link-local IP packet or non-local Ethernet frame received on that interface will be re-encapsulated with the cached headers as described in <a href="#sec-proxies-static" class="auto internal xref">Section 6.1</a>.  The service may thus drop, modify or generate new packets without affecting the proxy.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<div id="sr-mpls-pseudocode">
<section id="section-6.2.1">
          <h4 id="name-sr-mpls-pseudocode-2">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-sr-mpls-pseudocode-2" class="section-name selfRef">SR-MPLS Pseudocode</a>
          </h4>
<p id="section-6.2.1-1">The dynamic proxy SR-MPLS pseudocode is obtained by inserting the following instructions at the beginning of the static SR-MPLS pseudocode (<a href="#sec-proxies-static-mpls" class="auto internal xref">Section 6.1.1</a>).<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-mpls-dyn"></span><div id="code-dynamic-mpls-sid">
<figure id="figure-21">
            <div class="alignLeft art-text artwork" id="section-6.2.1-2.1">
<pre>
S01. If the top label S bit is different from 0 {
S02.   Discard the packet.
S03. }
S04. POP the top label.
S05. Copy the MPLS label stack in a CACHE entry associated with the
     interface IFACE-IN.
</pre>
</div>
<figcaption><a href="#figure-21" class="selfRef">Figure 21</a>:
<a href="#name-sid-processing-for-mpls-dyn" class="selfRef">SID processing for MPLS dynamic proxy</a>
            </figcaption></figure>
</div>
<p id="section-6.2.1-3">S01: As mentioned at the beginning of <a href="#sec-proxies" class="auto internal xref">Section 6</a>, an SR proxy is not needed to include an SR-unaware service at the end of an SR policy.<a href="#section-6.2.1-3" class="pilcrow">¶</a></p>
<p id="section-6.2.1-4">S05: An implementation may optimize the caching procedure by copying information
into the cache only if it is different from the current content of the cache
entry. Furthermore, a TTL margin can be configured for the top label stack entry
to prevent constant cache updates when multiple equal-cost paths with different
hop counts are used towards the SR proxy node.  In that case, a TTL difference
smaller than the configured margin should not trigger a cache update (provided
that the labels are the same).<a href="#section-6.2.1-4" class="pilcrow">¶</a></p>
<p id="section-6.2.1-5">When processing an Ethernet frame, an IPv4 packet or an IPv6 packet received on
the interface IFACE-IN and with a destination address that does not match any
address of IFACE-IN, the pseudocode reported in
<a href="#code-static-mpls-eth-inbound" class="auto internal xref">Figure 7</a>, <a href="#code-static-mpls-ipv4-inbound" class="auto internal xref">Figure 9</a> or
<a href="#code-static-mpls-ipv6-inbound" class="auto internal xref">Figure 11</a>, respectively, is executed.<a href="#section-6.2.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="srv6-pseudocode">
<section id="section-6.2.2">
          <h4 id="name-srv6-pseudocode-2">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-srv6-pseudocode-2" class="section-name selfRef">SRv6 Pseudocode</a>
          </h4>
<p id="section-6.2.2-1">When processing an IPv6 packet matching a FIB entry locally instantiated as an
SRv6 dynamic proxy SID, the same pseudocode as described in
<a href="#code-static-srv6-eth-sid" class="auto internal xref">Figure 12</a>, <a href="#code-static-srv6-ipv4-sid" class="auto internal xref">Figure 15</a> and
<a href="#code-static-srv6-ipv6-sid" class="auto internal xref">Figure 18</a>, respectively for Ethernet, IPv4 and IPv6 traffic,
is executed with the following addition between lines S17 and S18.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-srv6-dyn"></span><div id="code-dynamic-srv6-sid">
<figure id="figure-22">
            <div class="alignLeft art-text artwork" id="section-6.2.2-2.1">
<pre>
(... S17.     })
S17.1.   Copy the IPv6 encapsulation in a CACHE entry associated with
         the interface IFACE-IN.
(S18.     Perform IPv6 decapsulation...)
</pre>
</div>
<figcaption><a href="#figure-22" class="selfRef">Figure 22</a>:
<a href="#name-sid-processing-for-srv6-dyn" class="selfRef">SID processing for SRv6 dynamic proxy</a>
            </figcaption></figure>
</div>
<p id="section-6.2.2-3">An implementation may optimize the caching procedure by copying information into
the cache only if it is different from the current content of the cache entry.
A Hop Limit margin can be configured to prevent constant cache updates when
multiple equal-cost paths with different hop counts are used towards the SR
proxy node.  In that case, a Hop Limit difference smaller than the configured
margin should not trigger a cache update. Similarly, the Flow Label value can be
ignored when comparing the current packet IPv6 header with the cache entry. In
this case, the Flow Label should be re-computed by the proxy node when it
restores the IPv6 encapsulation from the cache entry.<a href="#section-6.2.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2.2-4">When processing the Upper-layer header of a packet matching a FIB entry locally
instantiated as an SRv6 dynamic proxy SID, process the packet as per
<span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span> Section 4.1.1.<a href="#section-6.2.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2.2-5">When processing an Ethernet frame, an IPv4 packet or an IPv6 packet received on
the interface IFACE-IN and with a destination address that does not match any
address of IFACE-IN, the same pseudocode as in <a href="#code-static-srv6-eth-inbound" class="auto internal xref">Figure 14</a>,
<a href="#code-static-srv6-ipv4-inbound" class="auto internal xref">Figure 17</a> or <a href="#code-static-srv6-ipv6-inbound" class="auto internal xref">Figure 20</a>,
respectively, is executed.<a href="#section-6.2.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="shared-memory-sr-proxy">
<section id="section-6.3">
        <h3 id="name-shared-memory-sr-proxy">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-shared-memory-sr-proxy" class="section-name selfRef">Shared Memory SR Proxy</a>
        </h3>
<p id="section-6.3-1">The shared memory proxy is an SR endpoint behavior for processing SR-MPLS or SRv6 encapsulated traffic on behalf of an SR-unaware service. This proxy behavior leverages a shared-memory interface with a virtualized service (VNF) in order to hide the SR information from an SR-unaware service while keeping it attached to the packet.  We assume in this case that the proxy and the VNF are running on the same compute node.  A typical scenario is an SR-capable vrouter running on a container host and forwarding traffic to VNFs isolated within their respective container.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="masquerading-sr-proxy">
<section id="section-6.4">
        <h3 id="name-masquerading-sr-proxy">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-masquerading-sr-proxy" class="section-name selfRef">Masquerading SR Proxy</a>
        </h3>
<p id="section-6.4-1">The masquerading proxy is an SR endpoint behavior for processing SRv6 traffic on behalf of an SR-unaware service.  This proxy thus receives SR traffic that is formed of an IPv6 header and an SRH on top of an inner payload.  The masquerading behavior is independent from the inner payload type.  Hence, the inner payload can be of any type but it is usually expected to be a transport layer packet, such as TCP or UDP.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4-2">A masquerading SR proxy segment is associated with the following mandatory parameters:<a href="#section-6.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4-3.1">
            <p id="section-6.4-3.1.1">NH-ADDR: Next hop Ethernet address<a href="#section-6.4-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-3.2">
            <p id="section-6.4-3.2.1">IFACE-OUT: Local interface for sending traffic towards the service<a href="#section-6.4-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-3.3">
            <p id="section-6.4-3.3.1">IFACE-IN: Local interface receiving the traffic coming back from the service<a href="#section-6.4-3.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.4-4">A masquerading SR proxy segment is thus defined for a specific service and bound to a pair of directed interfaces or sub-interfaces on the proxy.  As opposed to the static and dynamic SR proxies, a masquerading segment can be present at the same time in any number of SR service policies and the same interfaces can be bound to multiple masquerading proxy segments.  The only restriction is that a masquerading proxy segment cannot be the last segment in an SR service policy.<a href="#section-6.4-4" class="pilcrow">¶</a></p>
<p id="section-6.4-5">The first part of the masquerading behavior is triggered when the proxy node receives an IPv6 packet whose Destination Address matches a masquerading proxy SID.  The proxy inspects the IPv6 extension headers and substitutes the Destination Address with the last SID in the SRH attached to the IPv6 header, which represents the final destination of the IPv6 packet.  The packet is then sent out towards the service.<a href="#section-6.4-5" class="pilcrow">¶</a></p>
<p id="section-6.4-6">The service receives an IPv6 packet whose source and destination addresses are respectively the original source and final destination.  It does not attempt to inspect the SRH, as RFC8200 specifies that routing extension headers are not examined or processed by transit nodes. Instead, the service simply forwards the packet based on its current Destination Address.  In this scenario, we assume that the service can only inspect, drop or perform limited changes to the packets.  For example, Intrusion Detection Systems, Deep Packet Inspectors and non-NAT Firewalls are among the services that can be supported by a masquerading SR proxy.  Flavors of the masquerading behavior are defined in <a href="#sec-proxies-am-nat" class="auto internal xref">Section 6.4.2</a> and <a href="#sec-proxies-am-cache" class="auto internal xref">Section 6.4.3</a> to support a wider range of services.<a href="#section-6.4-6" class="pilcrow">¶</a></p>
<p id="section-6.4-7">The second part of the masquerading behavior, also called de-masquerading, is an inbound policy attached to the proxy interface receiving the traffic returning from the service, IFACE-IN.  This policy inspects the incoming traffic and triggers a regular SRv6 endpoint processing (End) on any IPv6 packet that contains an SRH.  This processing occurs before any lookup on the packet Destination Address is performed and it is sufficient to restore the right active SID as the Destination Address of the IPv6 packet.<a href="#section-6.4-7" class="pilcrow">¶</a></p>
<div id="srv6-masquerading-proxy-pseudocode">
<section id="section-6.4.1">
          <h4 id="name-srv6-masquerading-proxy-pse">
<a href="#section-6.4.1" class="section-number selfRef">6.4.1. </a><a href="#name-srv6-masquerading-proxy-pse" class="section-name selfRef">SRv6 Masquerading Proxy Pseudocode</a>
          </h4>
<p id="section-6.4.1-1">Masquerading: When processing an IPv6 packet matching a FIB entry locally
instantiated as an SRv6 masquerading proxy SID, the following pseudocode is
executed.<a href="#section-6.4.1-1" class="pilcrow">¶</a></p>
<span id="name-sid-processing-for-srv6-mas"></span><div id="code-masquerading-sid">
<figure id="figure-23">
            <div class="alignLeft art-text artwork" id="section-6.4.1-2.1">
<pre>
S01. When an SRH is processed {
S02.   If (Segments Left == 0) {
S03.     Proceed to process the next header in the packet.
S04.   }
S05.   If (IPv6 Hop Limit &lt;= 1) {
S06.     Send an ICMP Time Exceeded message to the Source Address,
         Code 0 (hop limit exceeded in transit),
         Interrupt packet processing and discard the packet.
S07.   }
S08.   max_last_entry = (Hdr Ext Len / 2) - 1
S09.   If ((Last Entry &gt; max_last_entry) or
           (Segments Left &gt; (Last Entry + 1))) {
S10.     Send an ICMP Parameter Problem message to the Source Address,
         Code 0 (Erroneous header field encountered),
         Pointer set to the Segments Left field,
         Interrupt packet processing and discard the packet.
S11.   }
S12.   Decrement Hop Limit by 1.
S13.   Decrement Segments Left by 1.
S14.   Copy Segment List[0] from the SRH to the Destination Address
       of the IPv6 header.
S15.   Submit the packet to the IPv6 module for transmission on
       interface IFACE-OUT via NH-ADDR.
S16. }
</pre>
</div>
<figcaption><a href="#figure-23" class="selfRef">Figure 23</a>:
<a href="#name-sid-processing-for-srv6-mas" class="selfRef">SID processing for SRv6 masquerading proxy</a>
            </figcaption></figure>
</div>
<p id="section-6.4.1-3">When processing the Upper-layer header of a packet matching a FIB entry locally
instantiated as an SRv6 masquerading proxy SID, process the packet as per
<span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span> Section 4.1.1.<a href="#section-6.4.1-3" class="pilcrow">¶</a></p>
<p id="section-6.4.1-4">De-masquerading: When processing an IPv6 packet received on the interface
IFACE-IN and with a destination address that does not match any address of
IFACE-IN, the following pseudocode is executed.<a href="#section-6.4.1-4" class="pilcrow">¶</a></p>
<span id="name-inbound-policy-for-srv6-mas"></span><div id="code-masquerading-inbound">
<figure id="figure-24">
            <div class="alignLeft art-text artwork" id="section-6.4.1-5.1">
<pre>
S01. When an SRH is processed {
S02.   If (IPv6 Hop Limit &lt;= 1) {
S03.     Send an ICMP Time Exceeded message to the Source Address,
         Code 0 (hop limit exceeded in transit),
         Interrupt packet processing and discard the packet.
S04.   }
S05.   If (Segments Left != 0) {
S06.     max_last_entry = (Hdr Ext Len / 2) - 1
S07.     If ((Last Entry &gt; max_last_entry) or
             (Segments Left &gt; Last Entry)) {
S08.       Send an ICMP Parameter Problem message to the Source Address,
           Code 0 (Erroneous header field encountered),
           Pointer set to the Segments Left field,
           Interrupt packet processing and discard the packet.
S09.     }
S10.     Copy Segment List[Segments Left] from the SRH to the
         Destination Address of the IPv6 header.
S11.   }
S12.   Decrement Hop Limit by 1.
S13.   Submit the packet to the IPv6 module for transmission to the
       next destination.
S14. }
</pre>
</div>
<figcaption><a href="#figure-24" class="selfRef">Figure 24</a>:
<a href="#name-inbound-policy-for-srv6-mas" class="selfRef">Inbound policy for SRv6 masquerading proxy</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="sec-proxies-am-nat">
<section id="section-6.4.2">
          <h4 id="name-destination-nat-flavor">
<a href="#section-6.4.2" class="section-number selfRef">6.4.2. </a><a href="#name-destination-nat-flavor" class="section-name selfRef">Destination NAT Flavor</a>
          </h4>
<p id="section-6.4.2-1">Services modifying the destination address in the packets they process, such as
NATs, can be supported by reporting the updated Destination Address back into
the Segment List field of the SRH.<a href="#section-6.4.2-1" class="pilcrow">¶</a></p>
<p id="section-6.4.2-2">The Destination NAT flavor of the SRv6 masquerading proxy is enabled by adding
the following instruction between lines S09 and S10 of the de-masquerading
pseudocode in <a href="#code-masquerading-inbound" class="auto internal xref">Figure 24</a>.<a href="#section-6.4.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.4.2-3">
<pre>
(... S09.     })
S09.1.   Copy the Destination Address of the IPv6 header to the
         Segment List[0] entry of the SRH.
(S10.     Copy Segment List[Segments Left] from the SRH to the
          Destination Address of the IPv6 header...)
</pre><a href="#section-6.4.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="sec-proxies-am-cache">
<section id="section-6.4.3">
          <h4 id="name-caching-flavor">
<a href="#section-6.4.3" class="section-number selfRef">6.4.3. </a><a href="#name-caching-flavor" class="section-name selfRef">Caching Flavor</a>
          </h4>
<p id="section-6.4.3-1">Services generating packets or acting as endpoints for transport connections can be supported by adding a dynamic caching mechanism similar to the one described in <a href="#sec-proxies-dynamic" class="auto internal xref">Section 6.2</a>.<a href="#section-6.4.3-1" class="pilcrow">¶</a></p>
<p id="section-6.4.3-2">The caching flavor of the SRv6 masquerading proxy is enabled by:<a href="#section-6.4.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4.3-3.1">
              <p id="section-6.4.3-3.1.1">Adding the following instruction between lines S14 and S15 of the masquerading
pseudocode in <a href="#code-masquerading-sid" class="auto internal xref">Figure 23</a>.<a href="#section-6.4.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<div class="alignLeft art-text artwork" id="section-6.4.3-4">
<pre>
(... S14.   Copy Segment List[0] from the SRH to the Destination
            Address of the IPv6 header.
S14.1. Copy the IPv6 encapsulation in a CACHE entry associated with
       the interface IFACE-IN.
(S15.   Submit the packet to the IPv6 module for transmission on
        interface IFACE-OUT via NH-ADDR.)
</pre><a href="#section-6.4.3-4" class="pilcrow">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-6.4.3-5.1">
              <p id="section-6.4.3-5.1.1">Updating the de-masquerading pseudocode such that, in addition to the SRH
processing in <a href="#code-masquerading-inbound" class="auto internal xref">Figure 24</a>, the following pseudocode is
executed when processing an IPv6 packet (received on the interface IFACE-IN and
with a destination address that does not match any address of IFACE-IN) that
does not contain an SRH.<a href="#section-6.4.3-5.1.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<div class="alignLeft art-text artwork" id="section-6.4.3-6">
<pre>
S01. Retrieve the CACHE entry associated with IFACE-IN.
S02. If the CACHE entry is not empty {
S03.   If (IPv6 Hop Limit &lt;= 1) {
S04.     Send an ICMP Time Exceeded message to the Source Address,
         Code 0 (hop limit exceeded in transit),
         Interrupt packet processing and discard the packet.
S05.   }
S06.   Decrement Hop Limit by 1.
S07.   Update the IPv6 encapsulation according to the retrieved CACHE
       entry.
S08.   Submit the packet to the IPv6 module for transmission to the
       next destination.
S09. }
</pre><a href="#section-6.4.3-6" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="metadata">
<section id="section-7">
      <h2 id="name-metadata">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-metadata" class="section-name selfRef">Metadata</a>
      </h2>
<div id="mpls-data-plane">
<section id="section-7.1">
        <h3 id="name-mpls-data-plane">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-mpls-data-plane" class="section-name selfRef">MPLS Data Plane</a>
        </h3>
<p id="section-7.1-1">Metadata can be carried for SR-MPLS traffic in a Segment Routing Header inserted between the last MPLS label and the MPLS payload. When used solely as a metadata container, the SRH does not carry any segment but only the mandatory header fields, including the tag and flags, and any TLVs that is required for transporting the metadata.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">Since the MPLS encapsulation has no explicit protocol identifier field to indicate the protocol type of the MPLS payload, how to indicate the presence of metadata in an MPLS packet is a potential issue to be addressed.  One possible solution is to add the indication about the presence of metadata in the semantic of the SIDs. Note that only the SIDs whose behavior involves looking at the metadata or the MPLS payload would need to include such semantic (e.g., service segments). Other segments, such as topological segments, are not affected by the presence of metadata.  Another, more generic, solution is to introduce a protocol identifier field within the MPLS packet as described in <span>[<a href="#I-D.xu-mpls-payload-protocol-identifier" class="cite xref">I-D.xu-mpls-payload-protocol-identifier</a>]</span>.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ipv6-data-plane">
<section id="section-7.2">
        <h3 id="name-ipv6-data-plane">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-ipv6-data-plane" class="section-name selfRef">IPv6 Data Plane</a>
        </h3>
<div id="srh-tlv-objects">
<section id="section-7.2.1">
          <h4 id="name-srh-tlv-objects">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-srh-tlv-objects" class="section-name selfRef">SRH TLV Objects</a>
          </h4>
<p id="section-7.2.1-1">The IPv6 SRH TLV objects are designed to carry all sorts of metadata. TLV objects can be imposed by the ingress edge router that steers the traffic into the SR service policy.<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
<p id="section-7.2.1-2">An SR-aware service may impose, modify or remove any TLV object attached to the first SRH, either by directly modifying the packet headers or via a control channel between the service and its forwarding plane.<a href="#section-7.2.1-2" class="pilcrow">¶</a></p>
<p id="section-7.2.1-3">An SR-aware service that re-classifies the traffic and steers it into a new SR service policy (e.g.  DPI) may attach any TLV object to the new SRH.<a href="#section-7.2.1-3" class="pilcrow">¶</a></p>
<p id="section-7.2.1-4">Metadata imposition and handling will be further discussed in a future version of this document.<a href="#section-7.2.1-4" class="pilcrow">¶</a></p>
<div id="opaque-metadata-tlv">
<section id="section-7.2.1.1">
            <h5 id="name-opaque-metadata-tlv">
<a href="#section-7.2.1.1" class="section-number selfRef">7.2.1.1. </a><a href="#name-opaque-metadata-tlv" class="section-name selfRef">Opaque Metadata TLV</a>
            </h5>
<p id="section-7.2.1.1-1">This document defines an SRv6 TLV called Opaque Metadata TLV. This is a fixed-length container to carry any type of Service Metadata. No assumption is made by this document on the structure or the content of the carried metadata. The Opaque Metadata TLV has the following format:<a href="#section-7.2.1.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.1.1-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Type     |     Length    |                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
|                                                               |
|                       Service Metadata                        |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-7.2.1.1-2" class="pilcrow">¶</a>
</div>
<p id="section-7.2.1.1-3">where:<a href="#section-7.2.1.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2.1.1-4.1">
                <p id="section-7.2.1.1-4.1.1">Type: to be assigned by IANA.<a href="#section-7.2.1.1-4.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.2.1.1-4.2">
                <p id="section-7.2.1.1-4.2.1">Length: 14.<a href="#section-7.2.1.1-4.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.2.1.1-4.3">
                <p id="section-7.2.1.1-4.3.1">Service Metadata: 14 octets of opaque data.<a href="#section-7.2.1.1-4.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
<div id="nsh-carrier-tlv">
<section id="section-7.2.1.2">
            <h5 id="name-nsh-carrier-tlv">
<a href="#section-7.2.1.2" class="section-number selfRef">7.2.1.2. </a><a href="#name-nsh-carrier-tlv" class="section-name selfRef">NSH Carrier TLV</a>
            </h5>
<p id="section-7.2.1.2-1">This document defines an SRv6 TLV called NSH Carrier TLV. It is a container to carry Service Metadata in the form of Variable-Length Metadata as defined in <span>[<a href="#RFC8300" class="cite xref">RFC8300</a>]</span> for NSH MD Type 2. The NSH Carrier TLV has the following format:<a href="#section-7.2.1.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.1.2-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Type     |     Length    |     Flags     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//            Service Metadata                                 //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-7.2.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-7.2.1.2-3">where:<a href="#section-7.2.1.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2.1.2-4.1">
                <p id="section-7.2.1.2-4.1.1">Type: to be assigned by IANA.<a href="#section-7.2.1.2-4.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.2.1.2-4.2">
                <p id="section-7.2.1.2-4.2.1">Length: the total length of the TLV.<a href="#section-7.2.1.2-4.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.2.1.2-4.3">
                <p id="section-7.2.1.2-4.3.1">Flags: 8 bits.  No flags are defined in this document.  SHOULD be set to 0 on transmission and MUST be ignored on receipt.<a href="#section-7.2.1.2-4.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.2.1.2-4.4">
                <p id="section-7.2.1.2-4.4.1">Service Metadata: a list of Service Metadata TLV as defined in <span>[<a href="#RFC8300" class="cite xref">RFC8300</a>]</span> for NSH MD Type 2.<a href="#section-7.2.1.2-4.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</section>
</div>
</section>
</div>
<div id="srh-tag">
<section id="section-7.2.2">
          <h4 id="name-srh-tag">
<a href="#section-7.2.2" class="section-number selfRef">7.2.2. </a><a href="#name-srh-tag" class="section-name selfRef">SRH Tag</a>
          </h4>
<p id="section-7.2.2-1">The SRH tag identifies a packet as part of a group or class of packets <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span>.<a href="#section-7.2.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2.2-2">In the context of service programming, this field can be used to encode basic metadata in the SRH. An example use-case is to leverage the SRH tag to encode a policy ID. This policy ID can then be used by an SR-aware function to identify a particular processing policy to be applied on that packet.<a href="#section-7.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="implementation-status">
<section id="section-8">
      <h2 id="name-implementation-status">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-8-1">This section is to be removed prior to publishing as an RFC.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div id="sec-implem-aware">
<section id="section-8.1">
        <h3 id="name-sr-aware-services-2">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-sr-aware-services-2" class="section-name selfRef">SR-Aware Services</a>
        </h3>
<p id="section-8.1-1">Specific SRv6 support has been implemented for the below open-source services:<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1-2.1">
            <p id="section-8.1-2.1.1">Iptables (1.6.2 and later) <span>[<a href="#IPTABLES" class="cite xref">IPTABLES</a>]</span><a href="#section-8.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.1-2.2">
            <p id="section-8.1-2.2.1">Nftables (0.8.4 and later) <span>[<a href="#NFTABLES" class="cite xref">NFTABLES</a>]</span><a href="#section-8.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.1-2.3">
            <p id="section-8.1-2.3.1">Snort <span>[<a href="#SNORT" class="cite xref">SNORT</a>]</span><a href="#section-8.1-2.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-8.1-3">In addition, any service relying on the Linux kernel, version 4.10 and later, or FD.io VPP for packet forwarding can be considered as SR-aware.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="proxy-behaviors">
<section id="section-8.2">
        <h3 id="name-proxy-behaviors">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-proxy-behaviors" class="section-name selfRef">Proxy Behaviors</a>
        </h3>
<p id="section-8.2-1">The static SR proxy is available for SR-MPLS and SRv6 on various Cisco hardware and software platforms.  Furthermore, the following proxies are available on open-source software.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<span id="name-open-source-implementation-"></span><div id="tab-implem">
<figure id="figure-25">
          <div class="alignLeft art-text artwork" id="section-8.2-2.1">
<pre>
                                        +-------------+-------------+
                                        |     VPP     |    Linux    |
+---+-----------------------------------+-------------+-------------+
| M |           Static proxy            |  Available  | In progress |
| P |                                   |             |             |
| L |           Dynamic proxy           | In progress | In progress |
| S |                                   |             |             |
|   |        Shared memory proxy        | In progress | In progress |
+---+-----------------------------------+-------------+-------------+
|   |           Static proxy            |  Available  | In progress |
| S |                                   |             |             |
| R |           Dynamic proxy           |  Available  |  Available  |
| v |                                   |             |             |
| 6 |        Shared memory proxy        | In progress | In progress |
|   |                                   |             |             |
|   |        Masquerading proxy         |  Available  |  Available  |
+---+-----------------------------------+-------------+-------------+
</pre>
</div>
<figcaption><a href="#figure-25" class="selfRef">Figure 25</a>:
<a href="#name-open-source-implementation-" class="selfRef">Open-source implementation status table</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="related-works">
<section id="section-9">
      <h2 id="name-related-works">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-related-works" class="section-name selfRef">Related Works</a>
      </h2>
<p id="section-9-1">The Segment Routing solution addresses a wide problem that covers both topological and service policies.  The topological and service instructions can be either deployed in isolation or in combination.  SR has thus a wider applicability than the architecture defined in <span>[<a href="#RFC7665" class="cite xref">RFC7665</a>]</span>.  Furthermore, the inherent property of SR is a stateless network fabric.  In SR, there is no state within the fabric to recognize a flow and associate it with a policy.  State is only present at the ingress edge of the SR domain, where the policy is encoded into the packets.  This is completely different from other proposals such as <span>[<a href="#RFC8300" class="cite xref">RFC8300</a>]</span> and the MPLS label swapping mechanism described in <span>[<a href="#RFC8595" class="cite xref">RFC8595</a>]</span>, which rely on state configured at every hop of the service chain.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="srv6-endpoint-behaviors">
<section id="section-10.1">
        <h3 id="name-srv6-endpoint-behaviors">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-srv6-endpoint-behaviors" class="section-name selfRef">SRv6 Endpoint Behaviors</a>
        </h3>
<p id="section-10.1-1">This I-D requests the IANA to allocate, within the "SRv6 Endpoint Behaviors" sub-registry belonging to the top-level "Segment-routing with IPv6 dataplane (SRv6) Parameters" registry, the following allocations:<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10.1-2">
<pre>
Value      Description                               Reference
--------------------------------------------------------------
TBA1-1     End.AN - SR-aware function (native)       [This.ID]
TBA1-2     End.AS - Static proxy                     [This.ID]
TBA1-3     End.AD - Dynamic proxy                    [This.ID]
TBA1-4     End.AM - Masquerading proxy               [This.ID]
TBA1-5     End.AM - Masquerading proxy with NAT      [This.ID]
TBA1-6     End.AM - Masquerading proxy with Caching  [This.ID]
TBA1-7     End.AM - Masquerading proxy with NAT &amp;    [This.ID]
                    Caching
</pre><a href="#section-10.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="segment-routing-header-tlvs">
<section id="section-10.2">
        <h3 id="name-segment-routing-header-tlvs">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-segment-routing-header-tlvs" class="section-name selfRef">Segment Routing Header TLVs</a>
        </h3>
<p id="section-10.2-1">This I-D requests the IANA to allocate, within the "Segment Routing Header TLVs" registry, the following allocations:<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10.2-2">
<pre>
Value      Description               Reference
----------------------------------------------
TBA2-1     Opaque Metadata TLV       [This.ID]
TBA2-2     NSH Carrier TLV           [This.ID]
</pre><a href="#section-10.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-11">
      <h2 id="name-security-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-11-1">The security requirements and mechanisms described in <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span>, <span>[<a href="#RFC8754" class="cite xref">RFC8754</a>]</span> and <span>[<a href="#RFC8986" class="cite xref">RFC8986</a>]</span> also apply to this document.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">This document does not introduce any new security vulnerabilities.<a href="#section-11-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-12">
      <h2 id="name-acknowledgements">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-12-1">The authors would like to thank Thierry Couture, Ketan Talaulikar, Loa Andersson, Andrew G.  Malis, Adrian Farrel, Alexander Vainshtein and Joel M.  Halpern for their valuable comments and suggestions on the document.<a href="#section-12-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-13">
      <h2 id="name-references">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-13.1">
        <h3 id="name-normative-references">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC8402">[RFC8402]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8660">[RFC8660]</dt>
        <dd>
<span class="refAuthor">Bashandy, A., Ed.</span>, <span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing with the MPLS Data Plane"</span>, <span class="seriesInfo">RFC 8660</span>, <span class="seriesInfo">DOI 10.17487/RFC8660</span>, <time datetime="2019-12" class="refDate">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8660">https://www.rfc-editor.org/info/rfc8660</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8754">[RFC8754]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Dukes, D., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="seriesInfo">RFC 8754</span>, <span class="seriesInfo">DOI 10.17487/RFC8754</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8986">[RFC8986]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Camarillo, P., Ed.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">Z. Li</span>, <span class="refTitle">"Segment Routing over IPv6 (SRv6) Network Programming"</span>, <span class="seriesInfo">RFC 8986</span>, <span class="seriesInfo">DOI 10.17487/RFC8986</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8986">https://www.rfc-editor.org/info/rfc8986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9256">[RFC9256]</dt>
      <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K., Ed.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Bogdanov, A.</span>, and <span class="refAuthor">P. Mattes</span>, <span class="refTitle">"Segment Routing Policy Architecture"</span>, <span class="seriesInfo">RFC 9256</span>, <span class="seriesInfo">DOI 10.17487/RFC9256</span>, <time datetime="2022-07" class="refDate">July 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9256">https://www.rfc-editor.org/info/rfc9256</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-13.2">
        <h3 id="name-informative-references">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.dawra-idr-bgp-sr-service-chaining">[I-D.dawra-idr-bgp-sr-service-chaining]</dt>
        <dd>
<span class="refAuthor">Dawra, G.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Bernier, D.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Elmalky, H.</span>, <span class="refAuthor">Xu, X.</span>, <span class="refAuthor">Clad, F.</span>, and <span class="refAuthor">K. Talaulikar</span>, <span class="refTitle">"BGP Control Plane Extensions for Segment Routing based Service Chaining"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-dawra-idr-bgp-sr-service-chaining-02</span>, <time datetime="2018-01-04" class="refDate">4 January 2018</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-dawra-idr-bgp-sr-service-chaining-02">https://datatracker.ietf.org/doc/html/draft-dawra-idr-bgp-sr-service-chaining-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.xu-mpls-payload-protocol-identifier">[I-D.xu-mpls-payload-protocol-identifier]</dt>
        <dd>
<span class="refAuthor">Xu, X.</span>, <span class="refAuthor">Assarpour, H.</span>, <span class="refAuthor">Ma, S.</span>, and <span class="refAuthor">F. Clad</span>, <span class="refTitle">"MPLS Payload Protocol Identifier"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-xu-mpls-payload-protocol-identifier-09</span>, <time datetime="2021-09-02" class="refDate">2 September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-xu-mpls-payload-protocol-identifier-09">https://datatracker.ietf.org/doc/html/draft-xu-mpls-payload-protocol-identifier-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IFIP18">[IFIP18]</dt>
        <dd>
<span class="refAuthor">Abdelsalam, A.</span>, <span class="refAuthor">Salsano, S.</span>, <span class="refAuthor">Clad, F.</span>, <span class="refAuthor">Camarillo, P.</span>, and <span class="refAuthor">C. Filsfils</span>, <span class="refTitle">"SEgment Routing Aware Firewall For Service Function Chaining scenarios"</span>, <span class="seriesInfo">IFIP Networking conference </span>, <time datetime="2018-05" class="refDate">May 2018</time>. </dd>
<dd class="break"></dd>
<dt id="IPTABLES">[IPTABLES]</dt>
        <dd>
<span class="refTitle">"iptables-1.6.2 changes"</span>, <time datetime="2018-02" class="refDate">February 2018</time>, <span>&lt;<a href="https://netfilter.org/projects/iptables/files/changes-iptables-1.6.2.txt">https://netfilter.org/projects/iptables/files/changes-iptables-1.6.2.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="NFTABLES">[NFTABLES]</dt>
        <dd>
<span class="refTitle">"nftables-0.8.4 changes"</span>, <time datetime="2018-05" class="refDate">May 2018</time>, <span>&lt;<a href="https://netfilter.org/projects/nftables/files/changes-nftables-0.8.4.txt">https://netfilter.org/projects/nftables/files/changes-nftables-0.8.4.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7665">[RFC7665]</dt>
        <dd>
<span class="refAuthor">Halpern, J., Ed.</span> and <span class="refAuthor">C. Pignataro, Ed.</span>, <span class="refTitle">"Service Function Chaining (SFC) Architecture"</span>, <span class="seriesInfo">RFC 7665</span>, <span class="seriesInfo">DOI 10.17487/RFC7665</span>, <time datetime="2015-10" class="refDate">October 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7665">https://www.rfc-editor.org/info/rfc7665</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8300">[RFC8300]</dt>
        <dd>
<span class="refAuthor">Quinn, P., Ed.</span>, <span class="refAuthor">Elzur, U., Ed.</span>, and <span class="refAuthor">C. Pignataro, Ed.</span>, <span class="refTitle">"Network Service Header (NSH)"</span>, <span class="seriesInfo">RFC 8300</span>, <span class="seriesInfo">DOI 10.17487/RFC8300</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8300">https://www.rfc-editor.org/info/rfc8300</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8595">[RFC8595]</dt>
        <dd>
<span class="refAuthor">Farrel, A.</span>, <span class="refAuthor">Bryant, S.</span>, and <span class="refAuthor">J. Drake</span>, <span class="refTitle">"An MPLS-Based Forwarding Plane for Service Function Chaining"</span>, <span class="seriesInfo">RFC 8595</span>, <span class="seriesInfo">DOI 10.17487/RFC8595</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8595">https://www.rfc-editor.org/info/rfc8595</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SNORT">[SNORT]</dt>
      <dd>
<span class="refTitle">"SR-Snort"</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://github.com/SRouting/SR-Snort">https://github.com/SRouting/SR-Snort</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="contributors">
<section id="appendix-A">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pablo Camarillo</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pcamaril@cisco.com" class="email">pcamaril@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bart Peirens</span></div>
<div dir="auto" class="left"><span class="org">Proximus</span></div>
<div dir="auto" class="left"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bart.peirens@proximus.com" class="email">bart.peirens@proximus.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Dirk Steinberg</span></div>
<div dir="auto" class="left"><span class="org">Lapishills Consulting Limited</span></div>
<div dir="auto" class="left"><span class="country-name">Cyprus</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:dirk@lapishills.com" class="email">dirk@lapishills.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ahmed AbdelSalam</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">Italy</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ahabdels@cisco.com" class="email">ahabdels@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Gaurav Dawra</span></div>
<div dir="auto" class="left"><span class="org">LinkedIn</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gdawra@linkedin.com" class="email">gdawra@linkedin.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stewart Bryant</span></div>
<div dir="auto" class="left"><span class="org">Futurewei Technologies Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:stewart.bryant@gmail.com" class="email">stewart.bryant@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hamid Assarpour</span></div>
<div dir="auto" class="left"><span class="org">Broadcom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:hamid.assarpour@broadcom.com" class="email">hamid.assarpour@broadcom.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Himanshu Shah</span></div>
<div dir="auto" class="left"><span class="org">Ciena</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:hshah@ciena.com" class="email">hshah@ciena.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Luis M. Contreras</span></div>
<div dir="auto" class="left"><span class="org">Telefonica I+D</span></div>
<div dir="auto" class="left"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:luismiguel.contrerasmurillo@telefonica.com" class="email">luismiguel.contrerasmurillo@telefonica.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jeff Tantsura</span></div>
<div dir="auto" class="left"><span class="org">Individual</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jefftant@gmail.com" class="email">jefftant@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Martin Vigoureux</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:martin.vigoureux@nokia.com" class="email">martin.vigoureux@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jisu Bhattacharya</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jisu@cisco.com" class="email">jisu@cisco.com</a>
</div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Francois Clad (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:fclad.ietf@gmail.com" class="email">fclad.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Xiaohu Xu (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">China Mobile</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:xuxiaohu@cmss.chinamobile.com" class="email">xuxiaohu@cmss.chinamobile.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Clarence Filsfils</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div dir="auto" class="left"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cf@cisco.com" class="email">cf@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Bernier</span></div>
<div dir="auto" class="left"><span class="org">Bell Canada</span></div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:daniel.bernier@bell.ca" class="email">daniel.bernier@bell.ca</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Cheng Li</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:chengli13@huawei.com" class="email">chengli13@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bruno Decraene</span></div>
<div dir="auto" class="left"><span class="org">Orange</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bruno.decraene@orange.com" class="email">bruno.decraene@orange.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Shaowen Ma</span></div>
<div dir="auto" class="left"><span class="org">Mellanox</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mashaowen@gmail.com" class="email">mashaowen@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Chaitanya Yadlapalli</span></div>
<div dir="auto" class="left"><span class="org">AT&amp;T</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cy098d@att.com" class="email">cy098d@att.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Wim Henderickx</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wim.henderickx@nokia.com" class="email">wim.henderickx@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stefano Salsano</span></div>
<div dir="auto" class="left"><span class="org">Universita di Roma "Tor Vergata"</span></div>
<div dir="auto" class="left"><span class="country-name">Italy</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:stefano.salsano@uniroma2.it" class="email">stefano.salsano@uniroma2.it</a>
</div>
</address>
</section>
</div>
</div>

                    </div>
                
            </div>
            <div class="d-print-none col-md-3 bg-light-subtle collapse show" id="sidebar">
                <div class="position-fixed border-start sidebar overflow-scroll overscroll-none no-scrollbar">
                    <div class="d-flex flex-column vh-100 pt-2 pt-lg-3 ps-3 pl-md-2 pl-lg-3">
                        <div>
                            <a class="btn btn-primary btn-sm" href="/doc/draft-ietf-spring-sr-service-programming/">Datatracker</a>
                            <p class="fw-bold pt-2">
                                
                                    draft-ietf-spring-sr-service-programming-09
                                
                                <br>
                                







    <div>This is an older version of an Internet-Draft whose latest revision state is "Active".</div>

                            </p>
                        </div>
                        
                        <ul class="nav nav-tabs nav-fill small me-2" role="tablist">
                            <li class="nav-item" role="presentation" title="Document information">
                                <button class="nav-link px-2"
                                        id="docinfo-tab"
                                        data-bs-toggle="tab"
                                        data-bs-target="#docinfo-tab-pane"
                                        type="button"
                                        role="tab"
                                        aria-controls="docinfo-tab-pane"
                                        aria-selected="true">
                                    <i class="bi bi-info-circle"></i><span class="d-none d-md-block d-xl-inline ms-xl-1">Info</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation" title="Table of contents">
                                <button class="nav-link px-2"
                                        id="toc-tab"
                                        data-bs-toggle="tab"
                                        data-bs-target="#toc-tab-pane"
                                        type="button"
                                        role="tab"
                                        aria-controls="toc-tab-pane"
                                        aria-selected="false">
                                    <i class="bi bi-list-ol"></i><span class="d-none d-md-block d-xl-inline ms-xl-1">Contents</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation" title="Preferences">
                                <button class="nav-link px-2"
                                        id="pref-tab"
                                        data-bs-toggle="tab"
                                        data-bs-target="#pref-tab-pane"
                                        type="button"
                                        role="tab"
                                        aria-controls="pref-tab-pane"
                                        aria-selected="false">
                                    <i class="bi bi-gear"></i><span class="d-none d-md-block d-xl-inline ms-xl-1">Prefs</span>
                                </button>
                            </li>
                        </ul>
                        <div class="overflow-auto tab-content pt-2 me-2">
                            <div class="tab-pane"
                                 id="docinfo-tab-pane"
                                 role="tabpanel"
                                 aria-labelledby="docinfo-tab"
                                 tabindex="0">
                                <table class="table table-sm table-borderless">
                                    







<tbody class="meta align-top ">
    <tr>
        <th scope="row">Document</th>
        <th scope="row">Document type</th>
        <td class="edit"></td>
        <td>
            







    <div>This is an older version of an Internet-Draft whose latest revision state is "Active".</div>

            
            
                <div class="badge rounded-pill text-bg-warning">
                    Expired &amp; archived
                </div>
            
            
                




    

            
        </td>
    </tr>
    
        <tr>
            <td></td>
            <th scope="row">Select version</th>
            <td class="edit"></td>
            <td>
                



    <ul class="revision-list pagination pagination-sm text-center flex-wrap my-0">
        
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-00"
                        >
                            00
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-01"
                        rel="nofollow">
                            01
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-02"
                        rel="nofollow">
                            02
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-03"
                        rel="nofollow">
                            03
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-04"
                        rel="nofollow">
                            04
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-05"
                        rel="nofollow">
                            05
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-06"
                        rel="nofollow">
                            06
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-07"
                        rel="nofollow">
                            07
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-08"
                        rel="nofollow">
                            08
                        </a>
                    </li>
                
            
                 
                    <li class="page-item active">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-09"
                        rel="nofollow">
                            09
                        </a>
                    </li>
                
            
                 
                    <li class="page-item ">
                        <a class="page-link"
                        href="/doc/html/draft-ietf-spring-sr-service-programming-10"
                        >
                            10
                        </a>
                    </li>
                
            
            
        
    </ul>

            </td>
        </tr>
        
            <tr>
                <td></td>
                <th scope="row">Compare versions</th>
                <td class="edit"></td>
                <td>
                    



<form class="form-horizontal diff-form"
      action="https://author-tools.ietf.org/iddiff"
      method="get"
      target="_blank">

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="From revision"
                    name="url1">
                
                    <option value="draft-ietf-spring-sr-service-programming-10">
                        draft-ietf-spring-sr-service-programming-10
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-09" selected>
                        draft-ietf-spring-sr-service-programming-09
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-08">
                        draft-ietf-spring-sr-service-programming-08
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-07">
                        draft-ietf-spring-sr-service-programming-07
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-06">
                        draft-ietf-spring-sr-service-programming-06
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-05">
                        draft-ietf-spring-sr-service-programming-05
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-04">
                        draft-ietf-spring-sr-service-programming-04
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-03">
                        draft-ietf-spring-sr-service-programming-03
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-02">
                        draft-ietf-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-01">
                        draft-ietf-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-00">
                        draft-ietf-spring-sr-service-programming-00
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-02">
                        draft-xuclad-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-01">
                        draft-xuclad-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-00">
                        draft-xuclad-spring-sr-service-programming-00
                        
                    </option>
                
                
            </select>

            <select class="form-select form-select-sm mb-1 select2-field"
                    data-max-entries="1"
                    data-width="resolve"
                    data-allow-clear="false"
                    data-minimum-input-length="0"
                    aria-label="To revision"
                    name="url2">
                
                    <option value="draft-ietf-spring-sr-service-programming-10" selected>
                        draft-ietf-spring-sr-service-programming-10
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-09">
                        draft-ietf-spring-sr-service-programming-09
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-08">
                        draft-ietf-spring-sr-service-programming-08
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-07">
                        draft-ietf-spring-sr-service-programming-07
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-06">
                        draft-ietf-spring-sr-service-programming-06
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-05">
                        draft-ietf-spring-sr-service-programming-05
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-04">
                        draft-ietf-spring-sr-service-programming-04
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-03">
                        draft-ietf-spring-sr-service-programming-03
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-02">
                        draft-ietf-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-01">
                        draft-ietf-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-ietf-spring-sr-service-programming-00">
                        draft-ietf-spring-sr-service-programming-00
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-02">
                        draft-xuclad-spring-sr-service-programming-02
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-01">
                        draft-xuclad-spring-sr-service-programming-01
                        
                    </option>
                
                    <option value="draft-xuclad-spring-sr-service-programming-00">
                        draft-xuclad-spring-sr-service-programming-00
                        
                    </option>
                
                
            </select>

            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--html"
                    name="difftype">
                Side-by-side
            </button>
            
            <button type="submit"
                    class="btn btn-primary btn-sm"
                    value="--hwdiff"
                    name="difftype">
                Inline
            </button>

</form>
                </td>
            </tr>
        
    
    <tr>
        <td></td>
        <th scope="row">Authors</th>
        <td class="edit">
            
        </td>
        <td>
            
            
                <span ><a 
           title="Datatracker profile of Francois Clad"
            href="/person/fclad.ietf@gmail.com" >Francois Clad</a> <a 
               href="mailto:fclad.ietf%40gmail.com"
               aria-label="Compose email to fclad.ietf@gmail.com"
               title="Compose email to fclad.ietf@gmail.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Xiaohu Xu"
            href="/person/xuxiaohu@huawei.com" >Xiaohu Xu</a> <a 
               href="mailto:xuxiaohu%40huawei.com"
               aria-label="Compose email to xuxiaohu@huawei.com"
               title="Compose email to xuxiaohu@huawei.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Clarence Filsfils"
            href="/person/cfilsfil@cisco.com" >Clarence Filsfils</a> <a 
               href="mailto:cfilsfil%40cisco.com"
               aria-label="Compose email to cfilsfil@cisco.com"
               title="Compose email to cfilsfil@cisco.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Daniel Bernier"
            href="/person/daniel.bernier@bell.ca" >Daniel Bernier</a> <a 
               href="mailto:daniel.bernier%40bell.ca"
               aria-label="Compose email to daniel.bernier@bell.ca"
               title="Compose email to daniel.bernier@bell.ca">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Cheng Li"
            href="/person/c.l@huawei.com" >Cheng Li</a> <a 
               href="mailto:c.l%40huawei.com"
               aria-label="Compose email to c.l@huawei.com"
               title="Compose email to c.l@huawei.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Bruno Decraene"
            href="/person/bruno.decraene@orange.com" >Bruno Decraene</a> <a 
               href="mailto:bruno.decraene%40orange.com"
               aria-label="Compose email to bruno.decraene@orange.com"
               title="Compose email to bruno.decraene@orange.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Shaowen Ma"
            href="/person/shaowen@google.com" >Shaowen Ma</a> <a 
               href="mailto:shaowen%40google.com"
               aria-label="Compose email to shaowen@google.com"
               title="Compose email to shaowen@google.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Chaitanya Yadlapalli"
            href="/person/cy098d@att.com" >Chaitanya Yadlapalli</a> <a 
               href="mailto:cy098d%40att.com"
               aria-label="Compose email to cy098d@att.com"
               title="Compose email to cy098d@att.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Wim Henderickx"
            href="/person/wim.henderickx@gmail.com" >Wim Henderickx</a> <a 
               href="mailto:wim.henderickx%40gmail.com"
               aria-label="Compose email to wim.henderickx@gmail.com"
               title="Compose email to wim.henderickx@gmail.com">
                <i class="bi bi-envelope"></i></a></span>,
            
                <span ><a 
           title="Datatracker profile of Stefano Salsano"
            href="/person/stefano.salsano@uniroma2.it" >Stefano Salsano</a> <a 
               href="mailto:stefano.salsano%40uniroma2.it"
               aria-label="Compose email to stefano.salsano@uniroma2.it"
               title="Compose email to stefano.salsano@uniroma2.it">
                <i class="bi bi-envelope"></i></a></span>
            
            
        </td>
    </tr>
    
    
        
            <tr>
                <td></td>
                <th scope="row">Replaces</th>
                <td class="edit">
                    
                </td>
                <td>
                    
                        
                            <a href="/doc/html/draft-xuclad-spring-sr-service-programming" title="Service Programming with Segment Routing">draft-xuclad-spring-sr-service-programming</a>
                        
                    
                </td>
            </tr>
        
        
        
    
    <tr>
        <td></td>
        <th scope="row">
            RFC stream
        </th>
        <td class="edit">
            
        </td>
        <td >
            
                
                
                    
                        



<img alt="IETF Logo"
     class="d-lm-none w-25 mt-1"
     
     
        
             src="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor-white.svg"
        
     
     >

<img alt="IETF Logo"
     class="d-dm-none w-25 mt-1"
     
     
        
             src="https://static.ietf.org/dt/12.35.0/ietf/images/ietf-logo-nor.svg"
        
     
     >
                    
                
                
            
        </td>
    </tr>
    
    <tr>
        <td></td>
        <th scope="row">
            Other formats
        </th>
        <td class="edit">
        </td>
        <td>
            
                
    <div class="buttonlist">
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-09.txt">
            
                <i class="bi bi-file-text"></i> txt
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-09.html">
            
                <i class="bi bi-file-code"></i> html
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-09.xml">
            
                <i class="bi bi-file-code"></i> xml
            
        </a>
        
    
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="/doc/draft-ietf-spring-sr-service-programming/09/bibtex/">
            
                <i class="bi bi-file-ruled"></i> bibtex
            
        </a>
        
    
        
        <a class="btn btn-primary btn-sm"
          
          target="_blank"
          href="/doc/bibxml3/draft-ietf-spring-sr-service-programming-09.xml">
            
                <i class="bi bi-file-code"></i> bibxml
            
        </a>
        
    
</div>

            
        </td>
    </tr>
    
    
        
            <tr>
                <td>
                </td>
                <th scope="row">
                    Additional resources
                </th>
                <td class="edit">
                    
                </td>
                <td>
                    
                        
                        
                            
                                <a href="https://mailarchive.ietf.org/arch/browse/spring/?q=draft-ietf-spring-sr-service-programming">
                                    Mailing list discussion
                                </a>
                            
                        
                    
                </td>
            </tr>
        
    
</tbody>
                                </table>
                                <a class="btn btn-sm btn-warning mb-3"
                                target="_blank"
                                href="https://github.com/ietf-tools/datatracker/issues/new/choose">
                                    Report a datatracker bug
                                    <i class="bi bi-bug"></i>
                                </a>
                            </div>
                            <div class="tab-pane mb-5"
                                 id="toc-tab-pane"
                                 role="tabpanel"
                                 aria-labelledby="toc-tab"
                                 tabindex="0">
                                <nav class="nav nav-pills flex-column small" id="toc-nav">
                                </nav>
                            </div>
                            <div class="tab-pane mb-5 small"
                                 id="pref-tab-pane"
                                 role="tabpanel"
                                 aria-labelledby="pref-tab"
                                 tabindex="0">
                                <label class="form-label fw-bold mb-2">Show sidebar by default</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="sidebar" id="on-radio">
                                    <label class="btn btn-outline-primary" for="on-radio">Yes</label>
                                    <input type="radio" class="btn-check" name="sidebar" id="off-radio">
                                    <label class="btn btn-outline-primary" for="off-radio">No</label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2">Tab to show by default</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="deftab" id="docinfo-radio">
                                    <label class="btn btn-outline-primary" for="docinfo-radio">
                                        <i class="bi bi-info-circle me-1"></i>Info
                                    </label>
                                    <input type="radio" class="btn-check" name="deftab" id="toc-radio">
                                    <label class="btn btn-outline-primary" for="toc-radio">
                                        <i class="bi bi-list-ol me-1"></i>Contents
                                    </label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2">HTMLization configuration</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="htmlconf" id="txt-radio">
                                    <label class="btn btn-outline-primary" for="txt-radio" title="This is the traditional HTMLization method.">
                                        <i class="bi bi-badge-sd me-1"></i>HTMLize the plaintext
                                    </label>
                                    <input type="radio" class="btn-check" name="htmlconf" id="html-radio">
                                    <label class="btn btn-outline-primary" for="html-radio" title="This is the modern HTMLization method.">
                                        <i class="bi bi-badge-hd me-1"></i>Plaintextify the HTML
                                    </label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2" for="ptsize">Maximum font size</label>
                                <input type="range" class="form-range" min="7" max="16" id="ptsize" oninput="ptdemo.value = ptsize.value">
                                <label class="form-label fw-bold mt-4 mb-2">Page dependencies</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="pagedeps" id="inline-radio">
                                    <label class="btn btn-outline-primary" for="inline-radio" title="Generate larger, standalone web pages that do not require network access to render.">
                                        <i class="bi bi-box me-1"></i>Inline
                                    </label>
                                    <input type="radio" class="btn-check" name="pagedeps" id="reference-radio">
                                    <label class="btn btn-outline-primary" for="reference-radio" title="Generate regular web pages that require network access to render.">
                                        <i class="bi bi-link-45deg me-1"></i>Reference
                                    </label>
                                </div>
                                <label class="form-label fw-bold mt-4 mb-2">Citation links</label>
                                <div class="btn-group-vertical btn-group-sm d-flex" role="group">
                                    <input type="radio" class="btn-check" name="reflinks" id="refsection-radio">
                                    <label class="btn btn-outline-primary" for="refsection-radio" title="Citation links go to the reference section.">
                                        <i class="bi bi-arrow-clockwise"></i> Go to reference section
                                    </label>
                                    <input type="radio" class="btn-check" name="reflinks" id="citation-radio">
                                    <label class="btn btn-outline-primary" for="citation-radio" title="Citation links go directly to the cited document.">
                                        <i class="bi bi-link-45deg me-1"></i>Go to linked document
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
<script type="text/javascript">
  var _paq = window._paq || [];
  
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.ietf.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', 7]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//analytics.ietf.org/piwik.php?idsite=7" style="border:0;" alt="" /></p></noscript>

    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'90f98a035840e59f',t:'MTczOTE2MzY2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
